this.createjs=this.createjs||{},function(){var a=function(){throw"UID cannot be instantiated"};a._nextID=0,a.get=function(){return a._nextID++},createjs.UID=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"Ticker cannot be instantiated."};a.useRAF=!1,a.addEventListener=null,a.removeEventListener=null,a.removeAllEventListeners=null,a.dispatchEvent=null,a.hasEventListener=null,a._listeners=null,createjs.EventDispatcher.initialize(a),a._listeners=null,a._pauseable=null,a._paused=!1,a._inited=!1,a._startTime=0,a._pausedTime=0,a._ticks=0,a._pausedTicks=0,a._interval=50,a._lastTime=0,a._times=null,a._tickTimes=null,a._rafActive=!1,a._timeoutID=null,a.addListener=function(b,c){null!=b&&(a.removeListener(b),a._pauseable[a._listeners.length]=null==c?!0:c,a._listeners.push(b))},a.init=function(){a._inited=!0,a._times=[],a._tickTimes=[],a._pauseable=[],a._listeners=[],a._times.push(a._lastTime=a._startTime=a._getTime()),a.setInterval(a._interval)},a.removeListener=function(b){var c=a._listeners;if(c){var d=c.indexOf(b);-1!=d&&(c.splice(d,1),a._pauseable.splice(d,1))}},a.removeAllListeners=function(){a._listeners=[],a._pauseable=[]},a.setInterval=function(b){a._interval=b,a._inited&&a._setupTick()},a.getInterval=function(){return a._interval},a.setFPS=function(b){a.setInterval(1e3/b)},a.getFPS=function(){return 1e3/a._interval},a.getMeasuredFPS=function(b){return a._times.length<2?-1:(null==b&&(b=0|a.getFPS()),b=Math.min(a._times.length-1,b),1e3/((a._times[0]-a._times[b])/b))},a.setPaused=function(b){a._paused=b},a.getPaused=function(){return a._paused},a.getTime=function(b){return a._getTime()-a._startTime-(b?a._pausedTime:0)},a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)},a._handleAF=function(){a._rafActive=!1,a._setupTick(),a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()},a._handleTimeout=function(){a.timeoutID=null,a._setupTick(),a._tick()},a._setupTick=function(){if(!a._rafActive&&null==a.timeoutID){if(a.useRAF){var b=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(b)return b(a._handleAF),a._rafActive=!0,void 0}a.timeoutID=setTimeout(a._handleTimeout,a._interval)}},a._tick=function(){var b=a._getTime();a._ticks++;var c=b-a._lastTime,d=a._paused;d&&(a._pausedTicks++,a._pausedTime+=c),a._lastTime=b;for(var e=a._pauseable,f=a._listeners.slice(),g=f?f.length:0,h=0;g>h;h++){var i=f[h];null==i||d&&e[h]||(i.tick?i.tick(c,d):i instanceof Function&&i(c,d))}for(a.dispatchEvent({type:"tick",paused:d,delta:c,time:b,runTime:b-a._pausedTime}),a._tickTimes.unshift(a._getTime()-b);a._tickTimes.length>100;)a._tickTimes.pop();for(a._times.unshift(b);a._times.length>100;)a._times.pop()};var b=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);a._getTime=function(){return b&&b.call(performance)||(new Date).getTime()},a.init(),createjs.Ticker=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d,e,f,g,h,i){this.initialize(a,b,c,d,e,f,g,h,i)},b=a.prototype;b.stageX=0,b.stageY=0,b.rawX=0,b.rawY=0,b.type=null,b.nativeEvent=null,b.onMouseMove=null,b.onMouseUp=null,b.target=null,b.pointerID=0,b.primary=!1,b.addEventListener=null,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,createjs.EventDispatcher.initialize(b),b.initialize=function(a,b,c,d,e,f,g,h,i){this.type=a,this.stageX=b,this.stageY=c,this.target=d,this.nativeEvent=e,this.pointerID=f,this.primary=g,this.rawX=null==h?b:h,this.rawY=null==i?c:i},b.clone=function(){return new a(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},b.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d,e,f){this.initialize(a,b,c,d,e,f)},b=a.prototype;a.identity=null,a.DEG_TO_RAD=Math.PI/180,b.a=1,b.b=0,b.c=0,b.d=1,b.tx=0,b.ty=0,b.alpha=1,b.shadow=null,b.compositeOperation=null,b.initialize=function(a,b,c,d,e,f){return null!=a&&(this.a=a),this.b=b||0,this.c=c||0,null!=d&&(this.d=d),this.tx=e||0,this.ty=f||0,this},b.prepend=function(a,b,c,d,e,f){var g=this.tx;if(1!=a||0!=b||0!=c||1!=d){var h=this.a,i=this.c;this.a=h*a+this.b*c,this.b=h*b+this.b*d,this.c=i*a+this.d*c,this.d=i*b+this.d*d}return this.tx=g*a+this.ty*c+e,this.ty=g*b+this.ty*d+f,this},b.append=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;return this.a=a*g+b*i,this.b=a*h+b*j,this.c=c*g+d*i,this.d=c*h+d*j,this.tx=e*g+f*i+this.tx,this.ty=e*h+f*j+this.ty,this},b.prependMatrix=function(a){return this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty),this.prependProperties(a.alpha,a.shadow,a.compositeOperation),this},b.appendMatrix=function(a){return this.append(a.a,a.b,a.c,a.d,a.tx,a.ty),this.appendProperties(a.alpha,a.shadow,a.compositeOperation),this},b.prependTransform=function(b,c,d,e,f,g,h,i,j){if(f%360)var k=f*a.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k);else l=1,m=0;return(i||j)&&(this.tx-=i,this.ty-=j),g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.prepend(l*d,m*d,-m*e,l*e,0,0),this.prepend(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c)):this.prepend(l*d,m*d,-m*e,l*e,b,c),this},b.appendTransform=function(b,c,d,e,f,g,h,i,j){if(f%360)var k=f*a.DEG_TO_RAD,l=Math.cos(k),m=Math.sin(k);else l=1,m=0;return g||h?(g*=a.DEG_TO_RAD,h*=a.DEG_TO_RAD,this.append(Math.cos(h),Math.sin(h),-Math.sin(g),Math.cos(g),b,c),this.append(l*d,m*d,-m*e,l*e,0,0)):this.append(l*d,m*d,-m*e,l*e,b,c),(i||j)&&(this.tx-=i*this.a+j*this.c,this.ty-=i*this.b+j*this.d),this},b.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},b.skew=function(b,c){return b*=a.DEG_TO_RAD,c*=a.DEG_TO_RAD,this.append(Math.cos(c),Math.sin(c),-Math.sin(b),Math.cos(b),0,0),this},b.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this},b.translate=function(a,b){return this.tx+=a,this.ty+=b,this},b.identity=function(){return this.alpha=this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.shadow=this.compositeOperation=null,this},b.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},b.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d},b.decompose=function(b){null==b&&(b={}),b.x=this.tx,b.y=this.ty,b.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),b.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var c=Math.atan2(-this.c,this.d),d=Math.atan2(this.b,this.a);return c==d?(b.rotation=d/a.DEG_TO_RAD,this.a<0&&this.d>=0&&(b.rotation+=b.rotation<=0?180:-180),b.skewX=b.skewY=0):(b.skewX=c/a.DEG_TO_RAD,b.skewY=d/a.DEG_TO_RAD),b},b.reinitialize=function(a,b,c,d,e,f,g,h,i){return this.initialize(a,b,c,d,e,f),this.alpha=g||1,this.shadow=h,this.compositeOperation=i,this},b.appendProperties=function(a,b,c){return this.alpha*=a,this.shadow=b||this.shadow,this.compositeOperation=c||this.compositeOperation,this},b.prependProperties=function(a,b,c){return this.alpha*=a,this.shadow=this.shadow||b,this.compositeOperation=this.compositeOperation||c,this},b.clone=function(){var b=new a(this.a,this.b,this.c,this.d,this.tx,this.ty);return b.shadow=this.shadow,b.alpha=this.alpha,b.compositeOperation=this.compositeOperation,b},b.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},a.identity=new a(1,0,0,1,0,0),createjs.Matrix2D=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b){this.initialize(a,b)},b=a.prototype;b.x=0,b.y=0,b.initialize=function(a,b){this.x=null==a?0:a,this.y=null==b?0:b},b.clone=function(){return new a(this.x,this.y)},b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d){this.initialize(a,b,c,d)},b=a.prototype;b.x=0,b.y=0,b.width=0,b.height=0,b.initialize=function(a,b,c,d){this.x=null==a?0:a,this.y=null==b?0:b,this.width=null==c?0:c,this.height=null==d?0:d},b.clone=function(){return new a(this.x,this.y,this.width,this.height)},b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d,e,f,g){this.initialize(a,b,c,d,e,f,g)},b=a.prototype;b.target=null,b.overLabel=null,b.outLabel=null,b.downLabel=null,b.play=!1,b._isPressed=!1,b._isOver=!1,b.initialize=function(a,b,c,d,e,f,g){a.addEventListener&&(this.target=a,a.cursor="pointer",this.overLabel=null==c?"over":c,this.outLabel=null==b?"out":b,this.downLabel=null==d?"down":d,this.play=e,this.setEnabled(!0),this.handleEvent({}),f&&(g&&(f.actionsEnabled=!1,f.gotoAndStop&&f.gotoAndStop(g)),a.hitArea=f))},b.setEnabled=function(a){var b=this.target;a?(b.addEventListener("mouseover",this),b.addEventListener("mouseout",this),b.addEventListener("mousedown",this)):(b.removeEventListener("mouseover",this),b.removeEventListener("mouseout",this),b.removeEventListener("mousedown",this))},b.toString=function(){return"[ButtonHelper]"},b.handleEvent=function(a){var b,c=this.target,d=a.type;"mousedown"==d?(a.addEventListener("mouseup",this),this._isPressed=!0,b=this.downLabel):"mouseup"==d?(this._isPressed=!1,b=this._isOver?this.overLabel:this.outLabel):"mouseover"==d?(this._isOver=!0,b=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,b=this._isPressed?this.overLabel:this.outLabel),this.play?c.gotoAndPlay&&c.gotoAndPlay(b):c.gotoAndStop&&c.gotoAndStop(b)},createjs.ButtonHelper=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c,d){this.initialize(a,b,c,d)},b=a.prototype;a.identity=null,b.color=null,b.offsetX=0,b.offsetY=0,b.blur=0,b.initialize=function(a,b,c,d){this.color=a,this.offsetX=b,this.offsetY=c,this.blur=d},b.toString=function(){return"[Shadow]"},b.clone=function(){return new a(this.color,this.offsetX,this.offsetY,this.blur)},a.identity=new a("transparent",0,0,0),createjs.Shadow=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype;b.complete=!0,b.onComplete=null,b.addEventListener=null,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,createjs.EventDispatcher.initialize(b),b._animations=null,b._frames=null,b._images=null,b._data=null,b._loadCount=0,b._frameHeight=0,b._frameWidth=0,b._numFrames=0,b._regX=0,b._regY=0,b.initialize=function(a){var b,c,d,e;if(null!=a){if(a.images&&(c=a.images.length)>0)for(e=this._images=[],b=0;c>b;b++){var f=a.images[b];if("string"==typeof f){var g=f;f=new Image,f.src=g}e.push(f),f.getContext||f.complete||(this._loadCount++,this.complete=!1,function(a){f.onload=function(){a._handleImageLoad()}}(this))}if(null==a.frames);else if(a.frames instanceof Array)for(this._frames=[],e=a.frames,b=0,c=e.length;c>b;b++){var h=e[b];this._frames.push({image:this._images[h[4]?h[4]:0],rect:new createjs.Rectangle(h[0],h[1],h[2],h[3]),regX:h[5]||0,regY:h[6]||0})}else d=a.frames,this._frameWidth=d.width,this._frameHeight=d.height,this._regX=d.regX||0,this._regY=d.regY||0,this._numFrames=d.count,0==this._loadCount&&this._calculateFrames();if(null!=(d=a.animations)){this._animations=[],this._data={};var i;for(i in d){var j={name:i},k=d[i];if("number"==typeof k)e=j.frames=[k];else if(k instanceof Array)if(1==k.length)j.frames=[k[0]];else for(j.frequency=k[3],j.next=k[2],e=j.frames=[],b=k[0];b<=k[1];b++)e.push(b);else{j.frequency=k.frequency,j.next=k.next;var l=k.frames;e=j.frames="number"==typeof l?[l]:l.slice(0)}j.next=e.length<2||0==j.next?null:null==j.next||1==j.next?i:j.next,j.frequency||(j.frequency=1),this._animations.push(i),this._data[i]=j}}}},b.getNumFrames=function(a){if(null==a)return this._frames?this._frames.length:this._numFrames;var b=this._data[a];return null==b?0:b.frames.length},b.getAnimations=function(){return this._animations.slice(0)},b.getAnimation=function(a){return this._data[a]},b.getFrame=function(a){var b;return this.complete&&this._frames&&(b=this._frames[a])?b:null},b.getFrameBounds=function(a){var b=this.getFrame(a);return b?new createjs.Rectangle(-b.regX,-b.regY,b.rect.width,b.rect.height):null},b.toString=function(){return"[SpriteSheet]"},b.clone=function(){var b=new a;return b.complete=this.complete,b._animations=this._animations,b._frames=this._frames,b._images=this._images,b._data=this._data,b._frameHeight=this._frameHeight,b._frameWidth=this._frameWidth,b._numFrames=this._numFrames,b._loadCount=this._loadCount,b},b._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.onComplete&&this.onComplete(),this.dispatchEvent("complete"))},b._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];for(var a=0,b=this._frameWidth,c=this._frameHeight,d=0,e=this._images;d<e.length;d++){for(var f=e[d],g=0|(f.width+1)/b,h=0|(f.height+1)/c,i=this._numFrames>0?Math.min(this._numFrames-a,g*h):g*h,j=0;i>j;j++)this._frames.push({image:f,rect:new createjs.Rectangle(j%g*b,(0|j/g)*c,b,c),regX:this._regX,regY:this._regY});a+=i}this._numFrames=a}},createjs.SpriteSheet=a}(),this.createjs=this.createjs||{},function(){function a(a,b,c){this.f=a,this.params=b,this.path=null==c?!0:c}a.prototype.exec=function(a){this.f.apply(a,this.params)};var b=function(){this.initialize()},c=b.prototype;b.getRGB=function(a,b,c,d){return null!=a&&null==c&&(d=b,c=255&a,b=255&a>>8,a=255&a>>16),null==d?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"},b.getHSL=function(a,b,c,d){return null==d?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"},b.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},b.STROKE_CAPS_MAP=["butt","round","square"],b.STROKE_JOINTS_MAP=["miter","round","bevel"],b._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),b.beginCmd=new a(b._ctx.beginPath,[],!1),b.fillCmd=new a(b._ctx.fill,[],!1),b.strokeCmd=new a(b._ctx.stroke,[],!1),c._strokeInstructions=null,c._strokeStyleInstructions=null,c._ignoreScaleStroke=!1,c._fillInstructions=null,c._instructions=null,c._oldInstructions=null,c._activeInstructions=null,c._active=!1,c._dirty=!1,c.initialize=function(){this.clear(),this._ctx=b._ctx},c.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)},c.draw=function(a){this._dirty&&this._updateInstructions();for(var b=this._instructions,c=0,d=b.length;d>c;c++)b[c].exec(a)},c.drawAsPath=function(a){this._dirty&&this._updateInstructions();for(var b,c=this._instructions,d=0,e=c.length;e>d;d++)((b=c[d]).path||0==d)&&b.exec(a)},c.moveTo=function(b,c){return this._activeInstructions.push(new a(this._ctx.moveTo,[b,c])),this},c.lineTo=function(b,c){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.lineTo,[b,c])),this},c.arcTo=function(b,c,d,e,f){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.arcTo,[b,c,d,e,f])),this},c.arc=function(b,c,d,e,f,g){return this._dirty=this._active=!0,null==g&&(g=!1),this._activeInstructions.push(new a(this._ctx.arc,[b,c,d,e,f,g])),this},c.quadraticCurveTo=function(b,c,d,e){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.quadraticCurveTo,[b,c,d,e])),this},c.bezierCurveTo=function(b,c,d,e,f,g){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.bezierCurveTo,[b,c,d,e,f,g])),this},c.rect=function(b,c,d,e){return this._dirty=this._active=!0,this._activeInstructions.push(new a(this._ctx.rect,[b,c,d,e])),this},c.closePath=function(){return this._active&&(this._dirty=!0,this._activeInstructions.push(new a(this._ctx.closePath,[]))),this},c.clear=function(){return this._instructions=[],this._oldInstructions=[],this._activeInstructions=[],this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null,this._active=this._dirty=!1,this},c.beginFill=function(c){return this._active&&this._newPath(),this._fillInstructions=c?[new a(this._setProp,["fillStyle",c],!1),b.fillCmd]:null,this},c.beginLinearGradientFill=function(c,d,e,f,g,h){this._active&&this._newPath();for(var i=this._ctx.createLinearGradient(e,f,g,h),j=0,k=c.length;k>j;j++)i.addColorStop(d[j],c[j]);return this._fillInstructions=[new a(this._setProp,["fillStyle",i],!1),b.fillCmd],this},c.beginRadialGradientFill=function(c,d,e,f,g,h,i,j){this._active&&this._newPath();for(var k=this._ctx.createRadialGradient(e,f,g,h,i,j),l=0,m=c.length;m>l;l++)k.addColorStop(d[l],c[l]);return this._fillInstructions=[new a(this._setProp,["fillStyle",k],!1),b.fillCmd],this},c.beginBitmapFill=function(c,d,e){this._active&&this._newPath(),d=d||"";var f,g=this._ctx.createPattern(c,d),h=new a(this._setProp,["fillStyle",g],!1);return f=e?[h,new a(this._ctx.save,[],!1),new a(this._ctx.transform,[e.a,e.b,e.c,e.d,e.tx,e.ty],!1),b.fillCmd,new a(this._ctx.restore,[],!1)]:[h,b.fillCmd],this._fillInstructions=f,this},c.endFill=function(){return this.beginFill()},c.setStrokeStyle=function(c,d,e,f,g){return this._active&&this._newPath(),this._strokeStyleInstructions=[new a(this._setProp,["lineWidth",null==c?"1":c],!1),new a(this._setProp,["lineCap",null==d?"butt":isNaN(d)?d:b.STROKE_CAPS_MAP[d]],!1),new a(this._setProp,["lineJoin",null==e?"miter":isNaN(e)?e:b.STROKE_JOINTS_MAP[e]],!1),new a(this._setProp,["miterLimit",null==f?"10":f],!1)],this._ignoreScaleStroke=g,this},c.beginStroke=function(b){return this._active&&this._newPath(),this._strokeInstructions=b?[new a(this._setProp,["strokeStyle",b],!1)]:null,this},c.beginLinearGradientStroke=function(b,c,d,e,f,g){this._active&&this._newPath();for(var h=this._ctx.createLinearGradient(d,e,f,g),i=0,j=b.length;j>i;i++)h.addColorStop(c[i],b[i]);return this._strokeInstructions=[new a(this._setProp,["strokeStyle",h],!1)],this},c.beginRadialGradientStroke=function(b,c,d,e,f,g,h,i){this._active&&this._newPath();for(var j=this._ctx.createRadialGradient(d,e,f,g,h,i),k=0,l=b.length;l>k;k++)j.addColorStop(c[k],b[k]);return this._strokeInstructions=[new a(this._setProp,["strokeStyle",j],!1)],this},c.beginBitmapStroke=function(b,c){this._active&&this._newPath(),c=c||"";var d=this._ctx.createPattern(b,c);return this._strokeInstructions=[new a(this._setProp,["strokeStyle",d],!1)],this},c.endStroke=function(){return this.beginStroke(),this},c.curveTo=c.quadraticCurveTo,c.drawRect=c.rect,c.drawRoundRect=function(a,b,c,d,e){return this.drawRoundRectComplex(a,b,c,d,e,e,e,e),this},c.drawRoundRectComplex=function(b,c,d,e,f,g,h,i){var j=(e>d?d:e)/2,k=0,l=0,m=0,n=0;0>f&&(f*=k=-1),f>j&&(f=j),0>g&&(g*=l=-1),g>j&&(g=j),0>h&&(h*=m=-1),h>j&&(h=j),0>i&&(i*=n=-1),i>j&&(i=j),this._dirty=this._active=!0;var o=this._ctx.arcTo,p=this._ctx.lineTo;return this._activeInstructions.push(new a(this._ctx.moveTo,[b+d-g,c]),new a(o,[b+d+g*l,c-g*l,b+d,c+g,g]),new a(p,[b+d,c+e-h]),new a(o,[b+d+h*m,c+e+h*m,b+d-h,c+e,h]),new a(p,[b+i,c+e]),new a(o,[b-i*n,c+e+i*n,b,c+e-i,i]),new a(p,[b,c+f]),new a(o,[b-f*k,c-f*k,b+f,c,f]),new a(this._ctx.closePath)),this},c.drawCircle=function(a,b,c){return this.arc(a,b,c,0,2*Math.PI),this},c.drawEllipse=function(b,c,d,e){this._dirty=this._active=!0;var f=.5522848,g=d/2*f,h=e/2*f,i=b+d,j=c+e,k=b+d/2,l=c+e/2;return this._activeInstructions.push(new a(this._ctx.moveTo,[b,l]),new a(this._ctx.bezierCurveTo,[b,l-h,k-g,c,k,c]),new a(this._ctx.bezierCurveTo,[k+g,c,i,l-h,i,l]),new a(this._ctx.bezierCurveTo,[i,l+h,k+g,j,k,j]),new a(this._ctx.bezierCurveTo,[k-g,j,b,l+h,b,l])),this},c.drawPolyStar=function(b,c,d,e,f,g){this._dirty=this._active=!0,null==f&&(f=0),f=1-f,null==g?g=0:g/=180/Math.PI;var h=Math.PI/e;this._activeInstructions.push(new a(this._ctx.moveTo,[b+Math.cos(g)*d,c+Math.sin(g)*d]));for(var i=0;e>i;i++)g+=h,1!=f&&this._activeInstructions.push(new a(this._ctx.lineTo,[b+Math.cos(g)*d*f,c+Math.sin(g)*d*f])),g+=h,this._activeInstructions.push(new a(this._ctx.lineTo,[b+Math.cos(g)*d,c+Math.sin(g)*d]));return this},c.decodePath=function(a){for(var c=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],d=[2,2,4,6,0],e=0,f=a.length,g=[],h=0,i=0,j=b.BASE_64;f>e;){var k=a.charAt(e),l=j[k],m=l>>3,n=c[m];if(!n||3&l)throw"bad path data (@"+e+"): "+k;var o=d[m];m||(h=i=0),g.length=0,e++;for(var p=(1&l>>2)+2,q=0;o>q;q++){var r=j[a.charAt(e)],s=r>>5?-1:1;r=(31&r)<<6|j[a.charAt(e+1)],3==p&&(r=r<<6|j[a.charAt(e+2)]),r=s*r/10,q%2?h=r+=h:i=r+=i,g[q]=r,e+=p}n.apply(this,g)}return this},c.clone=function(){var a=new b;return a._instructions=this._instructions.slice(),a._activeInstructions=this._activeInstructions.slice(),a._oldInstructions=this._oldInstructions.slice(),this._fillInstructions&&(a._fillInstructions=this._fillInstructions.slice()),this._strokeInstructions&&(a._strokeInstructions=this._strokeInstructions.slice()),this._strokeStyleInstructions&&(a._strokeStyleInstructions=this._strokeStyleInstructions.slice()),a._active=this._active,a._dirty=this._dirty,a},c.toString=function(){return"[Graphics]"},c.mt=c.moveTo,c.lt=c.lineTo,c.at=c.arcTo,c.bt=c.bezierCurveTo,c.qt=c.quadraticCurveTo,c.a=c.arc,c.r=c.rect,c.cp=c.closePath,c.c=c.clear,c.f=c.beginFill,c.lf=c.beginLinearGradientFill,c.rf=c.beginRadialGradientFill,c.bf=c.beginBitmapFill,c.ef=c.endFill,c.ss=c.setStrokeStyle,c.s=c.beginStroke,c.ls=c.beginLinearGradientStroke,c.rs=c.beginRadialGradientStroke,c.bs=c.beginBitmapStroke,c.es=c.endStroke,c.dr=c.drawRect,c.rr=c.drawRoundRect,c.rc=c.drawRoundRectComplex,c.dc=c.drawCircle,c.de=c.drawEllipse,c.dp=c.drawPolyStar,c.p=c.decodePath,c._updateInstructions=function(){this._instructions=this._oldInstructions.slice(),this._instructions.push(b.beginCmd),this._instructions.push.apply(this._instructions,this._activeInstructions),this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions),this._strokeInstructions&&(this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions),this._instructions.push.apply(this._instructions,this._strokeInstructions),this._ignoreScaleStroke?this._instructions.push(new a(this._ctx.save,[],!1),new a(this._ctx.setTransform,[1,0,0,1,0,0],!1),b.strokeCmd,new a(this._ctx.restore,[],!1)):this._instructions.push(b.strokeCmd))},c._newPath=function(){this._dirty&&this._updateInstructions(),this._oldInstructions=this._instructions,this._activeInstructions=[],this._active=this._dirty=!1},c._setProp=function(a,b){this[a]=b},createjs.Graphics=b}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype;a.suppressCrossDomainErrors=!1,a._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),a._hitTestCanvas.width=a._hitTestCanvas.height=1,a._hitTestContext=a._hitTestCanvas.getContext("2d"),a._nextCacheID=1,b.alpha=1,b.cacheCanvas=null,b.id=-1,b.mouseEnabled=!0,b.name=null,b.parent=null,b.regX=0,b.regY=0,b.rotation=0,b.scaleX=1,b.scaleY=1,b.skewX=0,b.skewY=0,b.shadow=null,b.visible=!0,b.x=0,b.y=0,b.compositeOperation=null,b.snapToPixel=!1,b.onPress=null,b.onClick=null,b.onDoubleClick=null,b.onMouseOver=null,b.onMouseOut=null,b.onTick=null,b.filters=null,b.cacheID=0,b.mask=null,b.hitArea=null,b.cursor=null,b.addEventListener=null,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,createjs.EventDispatcher.initialize(b),b._cacheOffsetX=0,b._cacheOffsetY=0,b._cacheScale=1,b._cacheDataURLID=0,b._cacheDataURL=null,b._matrix=null,b.initialize=function(){this.id=createjs.UID.get(),this._matrix=new createjs.Matrix2D},b.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},b.draw=function(a,b){var c=this.cacheCanvas;if(b||!c)return!1;var d=this._cacheScale;return a.drawImage(c,this._cacheOffsetX,this._cacheOffsetY,c.width/d,c.height/d),!0},b.updateContext=function(a){var b,c=this.mask,d=this;c&&c.graphics&&!c.graphics.isEmpty()&&(b=c.getMatrix(c._matrix),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),c.graphics.drawAsPath(a),a.clip(),b.invert(),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty)),b=d._matrix.identity().appendTransform(d.x,d.y,d.scaleX,d.scaleY,d.rotation,d.skewX,d.skewY,d.regX,d.regY),createjs.Stage._snapToPixelEnabled&&d.snapToPixel?a.transform(b.a,b.b,b.c,b.d,0|b.tx+.5,0|b.ty+.5):a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),a.globalAlpha*=d.alpha,d.compositeOperation&&(a.globalCompositeOperation=d.compositeOperation),d.shadow&&this._applyShadow(a,d.shadow)},b.cache=function(a,b,c,d,e){e=e||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this.cacheCanvas.width=Math.ceil(c*e),this.cacheCanvas.height=Math.ceil(d*e),this._cacheOffsetX=a,this._cacheOffsetY=b,this._cacheScale=e||1,this.updateCache()},b.updateCache=function(b){var c=this.cacheCanvas,d=this._cacheScale,e=this._cacheOffsetX*d,f=this._cacheOffsetY*d;if(!c)throw"cache() must be called before updateCache()";var g=c.getContext("2d");g.save(),b||g.clearRect(0,0,c.width+1,c.height+1),g.globalCompositeOperation=b,g.setTransform(d,0,0,d,-e,-f),this.draw(g,!0),this._applyFilters(),g.restore(),this.cacheID=a._nextCacheID++},b.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0,this._cacheScale=1},b.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},b.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof createjs.Stage?a:null},b.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return null==c?null:(c.append(1,0,0,1,a,b),new createjs.Point(c.tx,c.ty))},b.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);return null==c?null:(c.invert(),c.append(1,0,0,1,a,b),new createjs.Point(c.tx,c.ty))},b.localToLocal=function(a,b,c){var d=this.localToGlobal(a,b);return c.globalToLocal(d.x,d.y)},b.setTransform=function(a,b,c,d,e,f,g,h,i){return this.x=a||0,this.y=b||0,this.scaleX=null==c?1:c,this.scaleY=null==d?1:d,this.rotation=e||0,this.skewX=f||0,this.skewY=g||0,this.regX=h||0,this.regY=i||0,this},b.getMatrix=function(a){var b=this;return(a?a.identity():new createjs.Matrix2D).appendTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY).appendProperties(b.alpha,b.shadow,b.compositeOperation)},b.getConcatenatedMatrix=function(a){a?a.identity():a=new createjs.Matrix2D;for(var b=this;null!=b;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY).prependProperties(b.alpha,b.shadow,b.compositeOperation),b=b.parent;return a},b.hitTest=function(b,c){var d=a._hitTestContext;d.setTransform(1,0,0,1,-b,-c),this.draw(d);var e=this._testHit(d);return d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,2,2),e},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.clone=function(){var b=new a;return this.cloneProps(b),b},b.toString=function(){return"[DisplayObject (name="+this.name+")]"},b.cloneProps=function(a){a.alpha=this.alpha,a.name=this.name,a.regX=this.regX,a.regY=this.regY,a.rotation=this.rotation,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.shadow=this.shadow,a.skewX=this.skewX,a.skewY=this.skewY,a.visible=this.visible,a.x=this.x,a.y=this.y,a.mouseEnabled=this.mouseEnabled,a.compositeOperation=this.compositeOperation,this.cacheCanvas&&(a.cacheCanvas=this.cacheCanvas.cloneNode(!0),a.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))},b._applyShadow=function(a,b){b=b||Shadow.identity,a.shadowColor=b.color,a.shadowOffsetX=b.offsetX,a.shadowOffsetY=b.offsetY,a.shadowBlur=b.blur},b._tick=function(a){this.onTick&&this.onTick.apply(this,a);var b=this._listeners;b&&b.tick&&this.dispatchEvent({type:"tick",params:a})},b._testHit=function(b){try{var c=b.getImageData(0,0,1,1).data[3]>1}catch(d){if(!a.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return c},b._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,e=0;a>e;e++)this.filters[e].applyFilter(b,0,0,c,d)},b._hasMouseHandler=function(a){var b=this._listeners;return!!(1&a&&(this.onPress||this.onClick||this.onDoubleClick||b&&(this.hasEventListener("mousedown")||this.hasEventListener("click")||this.hasEventListener("dblclick")))||2&a&&(this.onMouseOver||this.onMouseOut||this.cursor||b&&(this.hasEventListener("mouseover")||this.hasEventListener("mouseout"))))},createjs.DisplayObject=a}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype=new createjs.DisplayObject;b.children=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(){this.DisplayObject_initialize(),this.children=[]},b.isVisible=function(){var a=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;for(var c=this.children.slice(0),d=0,e=c.length;e>d;d++){var f=c[d];f.isVisible()&&(a.save(),f.updateContext(a),f.draw(a),a.restore())}return!0},b.addChild=function(a){if(null==a)return a;var b=arguments.length;if(b>1){for(var c=0;b>c;c++)this.addChild(arguments[c]);return arguments[b-1]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),a},b.addChildAt=function(a,b){var c=arguments.length,d=arguments[c-1];if(0>d||d>this.children.length)return arguments[c-2];if(c>2){for(var e=0;c-1>e;e++)this.addChildAt(arguments[e],d+e);return arguments[c-2]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),a},b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;b>d;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))},b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;b>d;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});for(var e=!0,d=0;b>d;d++)e=e&&this.removeChildAt(c[d]);return e}if(0>a||a>this.children.length-1)return!1;var f=this.children[a];return f&&(f.parent=null),this.children.splice(a,1),!0},b.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=null},b.getChildAt=function(a){return this.children[a]},b.getChildByName=function(a){for(var b=this.children,c=0,d=b.length;d>c;c++)if(b[c].name==a)return b[c];return null},b.sortChildren=function(a){this.children.sort(a)},b.getChildIndex=function(a){return this.children.indexOf(a)},b.getNumChildren=function(){return this.children.length},b.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)},b.swapChildren=function(a,b){for(var c,d,e=this.children,f=0,g=e.length;g>f&&(e[f]==a&&(c=f),e[f]==b&&(d=f),null==c||null==d);f++);f!=g&&(e[c]=b,e[d]=a)},b.setChildIndex=function(a,b){var c=this.children,d=c.length;if(!(a.parent!=this||0>b||b>=d)){for(var e=0;d>e&&c[e]!=a;e++);e!=d&&e!=b&&(c.splice(e,1),e>b&&b--,c.splice(b,0,a))}},b.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1},b.hitTest=function(a,b){return null!=this.getObjectUnderPoint(a,b)},b.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);
return this._getObjectsUnderPoint(d.x,d.y,c),c},b.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)},b.clone=function(b){var c=new a;if(this.cloneProps(c),b)for(var d=c.children=[],e=0,f=this.children.length;f>e;e++){var g=this.children[e].clone(b);g.parent=c,d.push(g)}return c},b.toString=function(){return"[Container (name="+this.name+")]"},b.DisplayObject__tick=b._tick,b._tick=function(a){for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c._tick&&c._tick(a)}this.DisplayObject__tick(a)},b._getObjectsUnderPoint=function(b,c,d,e){var f=createjs.DisplayObject._hitTestContext,g=this._matrix,h=this._hasMouseHandler(e);if(!this.hitArea&&this.cacheCanvas&&h&&(this.getConcatenatedMatrix(g),f.setTransform(g.a,g.b,g.c,g.d,g.tx-b,g.ty-c),f.globalAlpha=g.alpha,this.draw(f),this._testHit(f)))return f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,2,2),this;for(var i=this.children.length,j=i-1;j>=0;j--){var k=this.children[j],l=k.hitArea;if(k.visible&&(l||k.isVisible())&&(!e||k.mouseEnabled)){var m=e&&k._hasMouseHandler(e);if(!(k instanceof a)||l&&m){if(!e||h||m){if(k.getConcatenatedMatrix(g),l&&(g.appendTransform(l.x,l.y,l.scaleX,l.scaleY,l.rotation,l.skewX,l.skewY,l.regX,l.regY),g.alpha=l.alpha),f.globalAlpha=g.alpha,f.setTransform(g.a,g.b,g.c,g.d,g.tx-b,g.ty-c),(l||k).draw(f),!this._testHit(f))continue;if(f.setTransform(1,0,0,1,0,0),f.clearRect(0,0,2,2),h)return this;if(!d)return k;d.push(k)}}else{var n;if(h){if(n=k._getObjectsUnderPoint(b,c))return this}else if(n=k._getObjectsUnderPoint(b,c,d,e),!d&&n)return n}}}return null},createjs.Container=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.Container;a._snapToPixelEnabled=!1,b.autoClear=!0,b.canvas=null,b.mouseX=0,b.mouseY=0,b.onMouseMove=null,b.onMouseUp=null,b.onMouseDown=null,b.snapToPixelEnabled=!1,b.mouseInBounds=!1,b.tickOnUpdate=!0,b.mouseMoveOutside=!1,b._pointerData=null,b._pointerCount=0,b._primaryPointerID=null,b._mouseOverIntervalID=null,b.Container_initialize=b.initialize,b.initialize=function(a){this.Container_initialize(),this.canvas="string"==typeof a?document.getElementById(a):a,this._pointerData={},this.enableDOMEvents(!0)},b.update=function(){if(this.canvas){this.autoClear&&this.clear(),a._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var b=this.canvas.getContext("2d");b.save(),this.updateContext(b),this.draw(b,!1),b.restore()}},b.tick=b.update,b.handleEvent=function(a){"tick"==a.type&&this.update(a)},b.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},b.toDataURL=function(a,b){b||(b="image/png");var c,d=this.canvas.getContext("2d"),e=this.canvas.width,f=this.canvas.height;if(a){c=d.getImageData(0,0,e,f);var g=d.globalCompositeOperation;d.globalCompositeOperation="destination-over",d.fillStyle=a,d.fillRect(0,0,e,f)}var h=this.canvas.toDataURL(b);return a&&(d.clearRect(0,0,e+1,f+1),d.putImageData(c,0,0),d.globalCompositeOperation=g),h},b.enableMouseOver=function(a){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null),null==a)a=20;else if(0>=a)return;var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1e3/Math.min(50,a))},b.enableDOMEvents=function(a){null==a&&(a=!0);var b,c,d=this._eventListeners;if(!a&&d){for(b in d)c=d[b],c.t.removeEventListener(b,c.f);this._eventListeners=null}else if(a&&!d&&this.canvas){var e=window.addEventListener?window:document,f=this;d=this._eventListeners={},d.mouseup={t:e,f:function(a){f._handleMouseUp(a)}},d.mousemove={t:e,f:function(a){f._handleMouseMove(a)}},d.dblclick={t:e,f:function(a){f._handleDoubleClick(a)}},d.mousedown={t:this.canvas,f:function(a){f._handleMouseDown(a)}};for(b in d)c=d[b],c.t.addEventListener(b,c.f)}},b.clone=function(){var b=new a(null);return this.cloneProps(b),b},b.toString=function(){return"[Stage (name="+this.name+")]"},b._getPointerData=function(a){var b=this._pointerData[a];return b||(b=this._pointerData[a]={x:0,y:0},(null==this._primaryPointerID||-1==this._primaryPointerID)&&(this._primaryPointerID=a)),b},b._handleMouseMove=function(a){a||(a=window.event),this._handlePointerMove(-1,a,a.pageX,a.pageY)},b._handlePointerMove=function(a,b,c,d){if(this.canvas){var e,f=this._getPointerData(a),g=f.inBounds;if(this._updatePointerPosition(a,c,d),g||f.inBounds||this.mouseMoveOutside){(this.onMouseMove||this.hasEventListener("stagemousemove"))&&(e=new createjs.MouseEvent("stagemousemove",f.x,f.y,this,b,a,a==this._primaryPointerID,f.rawX,f.rawY),this.onMouseMove&&this.onMouseMove(e),this.dispatchEvent(e));var h=f.event;h&&(h.onMouseMove||h.hasEventListener("mousemove"))&&(e=new createjs.MouseEvent("mousemove",f.x,f.y,h.target,b,a,a==this._primaryPointerID,f.rawX,f.rawY),h.onMouseMove&&h.onMouseMove(e),h.dispatchEvent(e,h.target))}}},b._updatePointerPosition=function(a,b,c){var d=this._getElementRect(this.canvas);b-=d.left,c-=d.top;var e=this.canvas.width,f=this.canvas.height;b/=(d.right-d.left)/e,c/=(d.bottom-d.top)/f;var g=this._getPointerData(a);(g.inBounds=b>=0&&c>=0&&e-1>=b&&f-1>=c)?(g.x=b,g.y=c):this.mouseMoveOutside&&(g.x=0>b?0:b>e-1?e-1:b,g.y=0>c?0:c>f-1?f-1:c),g.rawX=b,g.rawY=c,a==this._primaryPointerID&&(this.mouseX=g.x,this.mouseY=g.y,this.mouseInBounds=g.inBounds)},b._getElementRect=function(a){var b;try{b=a.getBoundingClientRect()}catch(c){b={top:a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}}var d=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),e=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),f=window.getComputedStyle?getComputedStyle(a):a.currentStyle,g=parseInt(f.paddingLeft)+parseInt(f.borderLeftWidth),h=parseInt(f.paddingTop)+parseInt(f.borderTopWidth),i=parseInt(f.paddingRight)+parseInt(f.borderRightWidth),j=parseInt(f.paddingBottom)+parseInt(f.borderBottomWidth);return{left:b.left+d+g,right:b.right+d-i,top:b.top+e+h,bottom:b.bottom+e-j}},b._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)},b._handlePointerUp=function(a,b,c){var d,e=this._getPointerData(a);(this.onMouseMove||this.hasEventListener("stagemouseup"))&&(d=new createjs.MouseEvent("stagemouseup",e.x,e.y,this,b,a,a==this._primaryPointerID,e.rawX,e.rawY),this.onMouseUp&&this.onMouseUp(d),this.dispatchEvent(d));var f=e.event;f&&(f.onMouseUp||f.hasEventListener("mouseup"))&&(d=new createjs.MouseEvent("mouseup",e.x,e.y,f.target,b,a,a==this._primaryPointerID,e.rawX,e.rawY),f.onMouseUp&&f.onMouseUp(d),f.dispatchEvent(d,f.target));var g=e.target;g&&(g.onClick||g.hasEventListener("click"))&&this._getObjectsUnderPoint(e.x,e.y,null,!0,this._mouseOverIntervalID?3:1)==g&&(d=new createjs.MouseEvent("click",e.x,e.y,g,b,a,a==this._primaryPointerID,e.rawX,e.rawY),g.onClick&&g.onClick(d),g.dispatchEvent(d)),c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):e.event=e.target=null},b._handleMouseDown=function(a){this._handlePointerDown(-1,a,!1)},b._handlePointerDown=function(a,b,c,d){var e=this._getPointerData(a);if(null!=d&&this._updatePointerPosition(a,c,d),this.onMouseDown||this.hasEventListener("stagemousedown")){var f=new createjs.MouseEvent("stagemousedown",e.x,e.y,this,b,a,a==this._primaryPointerID,e.rawX,e.rawY);this.onMouseDown&&this.onMouseDown(f),this.dispatchEvent(f)}var g=this._getObjectsUnderPoint(e.x,e.y,null,this._mouseOverIntervalID?3:1);g&&(e.target=g,(g.onPress||g.hasEventListener("mousedown"))&&(f=new createjs.MouseEvent("mousedown",e.x,e.y,g,b,a,a==this._primaryPointerID,e.rawX,e.rawY),g.onPress&&g.onPress(f),g.dispatchEvent(f),(f.onMouseMove||f.onMouseUp||f.hasEventListener("mousemove")||f.hasEventListener("mouseup"))&&(e.event=f)))},b._testMouseOver=function(){if(-1==this._primaryPointerID&&(this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var a=null;this.mouseInBounds&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var b=this._mouseOverTarget;if(b!=a){var c=this._getPointerData(-1);if(b&&(b.onMouseOut||b.hasEventListener("mouseout"))){var d=new createjs.MouseEvent("mouseout",c.x,c.y,b,null,-1,c.rawX,c.rawY);b.onMouseOut&&b.onMouseOut(d),b.dispatchEvent(d)}b&&(this.canvas.style.cursor=""),a&&(a.onMouseOver||a.hasEventListener("mouseover"))&&(d=new createjs.MouseEvent("mouseover",c.x,c.y,a,null,-1,c.rawX,c.rawY),a.onMouseOver&&a.onMouseOver(d),a.dispatchEvent(d)),a&&(this.canvas.style.cursor=a.cursor||""),this._mouseOverTarget=a}}},b._handleDoubleClick=function(a){var b=this._getPointerData(-1),c=this._getObjectsUnderPoint(b.x,b.y,null,this._mouseOverIntervalID?3:1);c&&(c.onDoubleClick||c.hasEventListener("dblclick"))&&(evt=new createjs.MouseEvent("dblclick",b.x,b.y,c,a,-1,!0,b.rawX,b.rawY),c.onDoubleClick&&c.onDoubleClick(evt),c.dispatchEvent(evt))},createjs.Stage=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.image=null,b.snapToPixel=!0,b.sourceRect=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){this.DisplayObject_initialize(),"string"==typeof a?(this.image=new Image,this.image.src=a):this.image=a},b.isVisible=function(){var a=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=this.sourceRect;return c?a.drawImage(this.image,c.x,c.y,c.width,c.height,0,0,c.width,c.height):a.drawImage(this.image,0,0),!0},b.clone=function(){var b=new a(this.image);return this.sourceRect&&(b.sourceRect=this.sourceRect.clone()),this.cloneProps(b),b},b.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.onAnimationEnd=null,b.currentFrame=-1,b.currentAnimation=null,b.paused=!0,b.spriteSheet=null,b.snapToPixel=!0,b.offset=0,b.currentAnimationFrame=0,b.addEventListener=null,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,createjs.EventDispatcher.initialize(b),b._advanceCount=0,b._animation=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){this.DisplayObject_initialize(),this.spriteSheet=a},b.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete&&this.currentFrame>=0;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(this.currentFrame);if(c){var d=c.rect;return a.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height),!0}},b.play=function(){this.paused=!1},b.stop=function(){this.paused=!0},b.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},b.gotoAndStop=function(a){this.paused=!0,this._goto(a)},b.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++,this._normalizeFrame()},b.getBounds=function(){return this.spriteSheet.getFrameBounds(this.currentFrame)},b.clone=function(){var b=new a(this.spriteSheet);return this.cloneProps(b),b},b.toString=function(){return"[BitmapAnimation (name="+this.name+")]"},b.DisplayObject__tick=b._tick,b._tick=function(a){var b=this._animation?this._animation.frequency:1;this.paused||0!=(++this._advanceCount+this.offset)%b||this.advance(),this.DisplayObject__tick(a)},b._normalizeFrame=function(){var a,b=this._animation,c=this.currentFrame,d=this.paused;if(b)if(a=b.frames.length,this.currentAnimationFrame>=a){var e=b.next;this._dispatchAnimationEnd(b,c,d,e,a-1)||(e?this._goto(e):(this.paused=!0,this.currentAnimationFrame=b.frames.length-1,this.currentFrame=b.frames[this.currentAnimationFrame]))}else this.currentFrame=b.frames[this.currentAnimationFrame];else a=this.spriteSheet.getNumFrames(),c>=a&&(this._dispatchAnimationEnd(b,c,d,a-1)||(this.currentFrame=0))},b._dispatchAnimationEnd=function(a,b,c,d,e){var f=a?a.name:null;return this.onAnimationEnd&&this.onAnimationEnd(this,f,d),this.dispatchEvent({type:"animationend",name:f,next:d}),!c&&this.paused&&(this.currentAnimationFrame=e),this.paused!=c||this._animation!=a||this.currentFrame!=b},b.DisplayObject_cloneProps=b.cloneProps,b.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.onAnimationEnd=this.onAnimationEnd,a.currentFrame=this.currentFrame,a.currentAnimation=this.currentAnimation,a.paused=this.paused,a.offset=this.offset,a._animation=this._animation,a.currentAnimationFrame=this.currentAnimationFrame},b._goto=function(a){if(isNaN(a)){var b=this.spriteSheet.getAnimation(a);b&&(this.currentAnimationFrame=0,this._animation=b,this.currentAnimation=a,this._normalizeFrame())}else this.currentAnimation=this._animation=null,this.currentFrame=a},createjs.BitmapAnimation=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.graphics=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){this.DisplayObject_initialize(),this.graphics=a?a:new createjs.Graphics},b.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.graphics.draw(a),!0)},b.clone=function(b){var c=new a(b&&this.graphics?this.graphics.clone():this.graphics);return this.cloneProps(c),c},b.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype=new createjs.DisplayObject;a._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")).getContext("2d"),b.text="",b.font=null,b.color="#000",b.textAlign="left",b.textBaseline="top",b.maxWidth=null,b.outline=!1,b.lineHeight=0,b.lineWidth=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a,b,c){this.DisplayObject_initialize(),this.text=a,this.font=b,this.color=c?c:"#000"},b.isVisible=function(){var a=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&a)},b.DisplayObject_draw=b.draw,b.draw=function(a,b){return this.DisplayObject_draw(a,b)?!0:(this.outline?a.strokeStyle=this.color:a.fillStyle=this.color,a.font=this.font,a.textAlign=this.textAlign||"start",a.textBaseline=this.textBaseline||"alphabetic",this._drawText(a),!0)},b.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width},b.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText("M").width},b.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())},b.clone=function(){var b=new a(this.text,this.font,this.color);return this.cloneProps(b),b},b.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},b.DisplayObject_cloneProps=b.cloneProps,b.cloneProps=function(a){this.DisplayObject_cloneProps(a),a.textAlign=this.textAlign,a.textBaseline=this.textBaseline,a.maxWidth=this.maxWidth,a.outline=this.outline,a.lineHeight=this.lineHeight,a.lineWidth=this.lineWidth},b._getWorkingContext=function(){var b=a._workingContext;return b.font=this.font,b.textAlign=this.textAlign||"start",b.textBaseline=this.textBaseline||"alphabetic",b},b._drawText=function(a){var b=!!a;b||(a=this._getWorkingContext());for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),d=this.lineHeight||this.getMeasuredLineHeight(),e=0,f=0,g=c.length;g>f;f++){var h=a.measureText(c[f]).width;if(null==this.lineWidth||h<this.lineWidth)b&&this._drawTextLine(a,c[f],e*d),e++;else{for(var i=c[f].split(/(\s)/),j=i[0],k=1,l=i.length;l>k;k+=2)a.measureText(j+i[k]+i[k+1]).width>this.lineWidth?(b&&this._drawTextLine(a,j,e*d),e++,j=i[k+1]):j+=i[k]+i[k+1];b&&this._drawTextLine(a,j,e*d),e++}}return e},b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth||65535):a.fillText(b,0,c,this.maxWidth||65535)},createjs.Text=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"SpriteSheetUtils cannot be instantiated"};a._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),a._workingContext=a._workingCanvas.getContext("2d"),a.addFlippedFrames=function(b,c,d,e){if(c||d||e){var f=0;c&&a._flip(b,++f,!0,!1),d&&a._flip(b,++f,!1,!0),e&&a._flip(b,++f,!0,!0)}},a.extractFrame=function(b,c){isNaN(c)&&(c=b.getAnimation(c).frames[0]);var d=b.getFrame(c);if(!d)return null;var e=d.rect,f=a._workingCanvas;f.width=e.width,f.height=e.height,a._workingContext.drawImage(d.image,e.x,e.y,e.width,e.height,0,0,e.width,e.height);var g=new Image;return g.src=f.toDataURL("image/png"),g},a.mergeAlpha=function(a,b,c){c||(c=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),c.width=Math.max(b.width,a.width),c.height=Math.max(b.height,a.height);var d=c.getContext("2d");return d.save(),d.drawImage(a,0,0),d.globalCompositeOperation="destination-in",d.drawImage(b,0,0),d.restore(),c},a._flip=function(b,c,d,e){for(var f=b._images,g=a._workingCanvas,h=a._workingContext,i=f.length/c,j=0;i>j;j++){var k=f[j];k.__tmp=j,h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,g.width+1,g.height+1),g.width=k.width,g.height=k.height,h.setTransform(d?-1:1,0,0,e?-1:1,d?k.width:0,e?k.height:0),h.drawImage(k,0,0);var l=new Image;l.src=g.toDataURL("image/png"),l.width=k.width,l.height=k.height,f.push(l)}var m=b._frames,n=m.length/c;for(j=0;n>j;j++){k=m[j];var o=k.rect.clone();l=f[k.image.__tmp+i*c];var p={image:l,rect:o,regX:k.regX,regY:k.regY};d&&(o.x=l.width-o.x-o.width,p.regX=o.width-k.regX),e&&(o.y=l.height-o.y-o.height,p.regY=o.height-k.regY),m.push(p)}var q="_"+(d?"h":"")+(e?"v":""),r=b._animations,s=b._data,t=r.length/c;for(j=0;t>j;j++){var u=r[j];k=s[u];var v={name:u+q,frequency:k.frequency,next:k.next,frames:[]};k.next&&(v.next+=q),m=k.frames;for(var w=0,x=m.length;x>w;w++)v.frames.push(m[w]+n*c);s[v.name]=v,r.push(v.name)}},createjs.SpriteSheetUtils=a}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype;a.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",a.ERR_RUNNING="a build is already running",b.maxWidth=2048,b.maxHeight=2048,b.spriteSheet=null,b.scale=1,b.padding=1,b.timeSlice=.3,b.progress=-1,b.onComplete=null,b.onProgress=null,b.addEventListener=null,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,createjs.EventDispatcher.initialize(b),b._frames=null,b._animations=null,b._data=null,b._nextFrameIndex=0,b._index=0,b._timerID=null,b._scale=1,b.initialize=function(){this._frames=[],this._animations={}},b.addFrame=function(b,c,d,e,f,g){if(this._data)throw a.ERR_RUNNING;var h=c||b.bounds||b.nominalBounds;return!h&&b.getBounds&&(h=b.getBounds()),h?(d=d||1,this._frames.push({source:b,sourceRect:h,scale:d,funct:e,params:f,scope:g,index:this._frames.length,height:h.height*d})-1):null},b.addAnimation=function(b,c,d,e){if(this._data)throw a.ERR_RUNNING;this._animations[b]={frames:c,next:d,frequency:e}},b.addMovieClip=function(b,c,d){if(this._data)throw a.ERR_RUNNING;var e=b.frameBounds,f=c||b.bounds||b.nominalBounds;if(!f&&b.getBounds&&(f=b.getBounds()),!f&&!e)return null;for(var g=this._frames.length,h=b.timeline.duration,i=0;h>i;i++){var j=e&&e[i]?e[i]:f;this.addFrame(b,j,d,function(a){var b=this.actionsEnabled;this.actionsEnabled=!1,this.gotoAndStop(a),this.actionsEnabled=b},[i],b)}var k=b.timeline._labels,l=[];for(var m in k)l.push({index:k[m],label:m});if(l.length){l.sort(function(a,b){return a.index-b.index});for(var i=0,n=l.length;n>i;i++){for(var o=l[i].label,p=g+l[i].index,q=g+(i==n-1?h:l[i+1].index),r=[],s=p;q>s;s++)r.push(s);this.addAnimation(o,r,!0)}}},b.build=function(){if(this._data)throw a.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},b.buildAsync=function(b){if(this._data)throw a.ERR_RUNNING;this.timeSlice=b,this._startBuild();var c=this;this._timerID=setTimeout(function(){c._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},b.stopAsync=function(){clearTimeout(this._timerID),this._data=null},b.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},b.toString=function(){return"[SpriteSheetBuilder]"},b._startBuild=function(){var b=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var c=[];this._data={images:[],frames:c,animations:this._animations};var d=this._frames.slice();if(d.sort(function(a,b){return a.height<=b.height?-1:1}),d[d.length-1].height+2*b>this.maxHeight)throw a.ERR_DIMENSIONS;for(var e=0,f=0,g=0;d.length;){var h=this._fillRow(d,e,g,c,b);if(h.w>f&&(f=h.w),e+=h.h,!h.h||!d.length){var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.width=this._getSize(f,this.maxWidth),i.height=this._getSize(e,this.maxHeight),this._data.images[g]=i,h.h||(f=e=0,g++)}}},b._getSize=function(a,b){for(var c=4;Math.pow(2,++c)<a;);return Math.min(b,Math.pow(2,c))},b._fillRow=function(b,c,d,e,f){var g=this.maxWidth,h=this.maxHeight;c+=f;for(var i=h-c,j=f,k=0,l=b.length-1;l>=0;l--){var m=b[l],n=this._scale*m.scale,o=m.sourceRect,p=m.source,q=Math.floor(n*o.x-f),r=Math.floor(n*o.y-f),s=Math.ceil(n*o.height+2*f),t=Math.ceil(n*o.width+2*f);if(t>g)throw a.ERR_DIMENSIONS;s>i||j+t>g||(m.img=d,m.rect=new createjs.Rectangle(j,c,t,s),k=k||s,b.splice(l,1),e[m.index]=[j,c,t,s,d,Math.round(-q+n*p.regX-f),Math.round(-r+n*p.regY-f)],j+=t)}return{w:j,h:k}},b._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.onComplete&&this.onComplete(this),this.dispatchEvent("complete")},b._run=function(){for(var a=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),b=(new Date).getTime()+a,c=!1;b>(new Date).getTime();)if(!this._drawNext()){c=!0;break}if(c)this._endBuild();else{var d=this;this._timerID=setTimeout(function(){d._run()},50-a)}var e=this.progress=this._index/this._frames.length;this.onProgress&&this.onProgress(this,e),this.dispatchEvent({type:"progress",progress:e})},b._drawNext=function(){var a=this._frames[this._index],b=a.scale*this._scale,c=a.rect,d=a.sourceRect,e=this._data.images[a.img],f=e.getContext("2d");return a.funct&&a.funct.apply(a.scope,a.params),f.save(),f.beginPath(),f.rect(c.x,c.y,c.width,c.height),f.clip(),f.translate(Math.ceil(c.x-d.x*b),Math.ceil(c.y-d.y*b)),f.scale(b,b),a.source.draw(f),f.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.DisplayObject;b.htmlElement=null,b._oldMtx=null,b.DisplayObject_initialize=b.initialize,b.initialize=function(a){"string"==typeof a&&(a=document.getElementById(a)),this.DisplayObject_initialize(),this.mouseEnabled=!1,this.htmlElement=a;var b=a.style;b.position="absolute",b.transformOrigin=b.WebkitTransformOrigin=b.msTransformOrigin=b.MozTransformOrigin=b.OTransformOrigin="0% 0%"},b.isVisible=function(){return null!=this.htmlElement},b.draw=function(){if(null!=this.htmlElement){var a=this.getConcatenatedMatrix(this._matrix),b=this.htmlElement,c=b.style;if(!this.visible)return!0;c.visibility="visible";var d=this._oldMtx||{};return d.alpha!=a.alpha&&(c.opacity=""+a.alpha,d.alpha=a.alpha),(d.tx!=a.tx||d.ty!=a.ty||d.a!=a.a||d.b!=a.b||d.c!=a.c||d.d!=a.d)&&(c.transform=c.WebkitTransform=c.OTransform=c.msTransform=["matrix("+a.a,a.b,a.c,a.d,0|a.tx+.5,(0|a.ty+.5)+")"].join(","),c.MozTransform=["matrix("+a.a,a.b,a.c,a.d,(0|a.tx+.5)+"px",(0|a.ty+.5)+"px)"].join(","),this._oldMtx=a.clone()),!0}},b.cache=function(){},b.uncache=function(){},b.updateCache=function(){},b.hitTest=function(){},b.localToGlobal=function(){},b.globalToLocal=function(){},b.localToLocal=function(){},b.clone=function(){throw"DOMElement cannot be cloned."},b.toString=function(){return"[DOMElement (name="+this.name+")]"},b.DisplayObject__tick=b._tick,b._tick=function(a){this.htmlElement.style.visibility="hidden",this.DisplayObject__tick(a)},createjs.DOMElement=a}(),this.createjs=this.createjs||{},function(){var a=function(){this.initialize()},b=a.prototype;b.initialize=function(){},b.getBounds=function(){return new createjs.Rectangle(0,0,0,0)},b.applyFilter=function(){},b.toString=function(){return"[Filter]"},b.clone=function(){return new a},createjs.Filter=a}(),this.createjs=this.createjs||{},function(){var a=function(a){this.initialize(a)},b=a.prototype=new createjs.Filter;b.matrix=null,b.initialize=function(a){this.matrix=a},b.applyFilter=function(a,b,c,d,e,f,g,h){f=f||a,null==g&&(g=b),null==h&&(h=c);try{var i=a.getImageData(b,c,d,e)}catch(j){return!1}for(var k,l,m,n,o=i.data,p=o.length,q=this.matrix,r=q[0],s=q[1],t=q[2],u=q[3],v=q[4],w=q[5],x=q[6],y=q[7],z=q[8],A=q[9],B=q[10],C=q[11],D=q[12],E=q[13],F=q[14],G=q[15],H=q[16],I=q[17],J=q[18],K=q[19],L=0;p>L;L+=4)k=o[L],l=o[L+1],m=o[L+2],n=o[L+3],o[L]=k*r+l*s+m*t+n*u+v,o[L+1]=k*w+l*x+m*y+n*z+A,o[L+2]=k*B+l*C+m*D+n*E+F,o[L+3]=k*G+l*H+m*I+n*J+K;return i.data=o,f.putImageData(i,g,h),!0},b.toString=function(){return"[ColorMatrixFilter]"},b.clone=function(){return new a(this.matrix)},createjs.ColorMatrixFilter=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"Touch cannot be instantiated"};a.isSupported=function(){return"ontouchstart"in window||window.navigator.msPointerEnabled},a.enable=function(b,c,d){return b&&b.canvas&&a.isSupported()?(b.__touch={pointers:{},multitouch:!c,preventDefault:!d,count:0},"ontouchstart"in window?a._IOS_enable(b):window.navigator.msPointerEnabled&&a._IE_enable(b),!0):!1},a.disable=function(b){b&&("ontouchstart"in window?a._IOS_disable(b):window.navigator.msPointerEnabled&&a._IE_disable(b))},a._IOS_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IOS_handleEvent(b,c)};c.addEventListener("touchstart",d,!1),c.addEventListener("touchmove",d,!1),c.addEventListener("touchend",d,!1),c.addEventListener("touchcancel",d,!1)},a._IOS_disable=function(a){var b=a.canvas;if(b){var c=a.__touch.f;b.removeEventListener("touchstart",c,!1),b.removeEventListener("touchmove",c,!1),b.removeEventListener("touchend",c,!1),b.removeEventListener("touchcancel",c,!1)}},a._IOS_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();for(var c=b.changedTouches,d=b.type,e=0,f=c.length;f>e;e++){var g=c[e],h=g.identifier;g.target==a.canvas&&("touchstart"==d?this._handleStart(a,h,b,g.pageX,g.pageY):"touchmove"==d?this._handleMove(a,h,b,g.pageX,g.pageY):("touchend"==d||"touchcancel"==d)&&this._handleEnd(a,h,b))}}},a._IE_enable=function(b){var c=b.canvas,d=b.__touch.f=function(c){a._IE_handleEvent(b,c)};c.addEventListener("MSPointerDown",d,!1),window.addEventListener("MSPointerMove",d,!1),window.addEventListener("MSPointerUp",d,!1),window.addEventListener("MSPointerCancel",d,!1),b.__touch.preventDefault&&(c.style.msTouchAction="none"),b.__touch.activeIDs={}},a._IE_disable=function(a){var b=a.__touch.f;window.removeEventListener("MSPointerMove",b,!1),window.removeEventListener("MSPointerUp",b,!1),window.removeEventListener("MSPointerCancel",b,!1),a.canvas&&a.canvas.removeEventListener("MSPointerDown",b,!1)},a._IE_handleEvent=function(a,b){if(a){a.__touch.preventDefault&&b.preventDefault&&b.preventDefault();var c=b.type,d=b.pointerId,e=a.__touch.activeIDs;if("MSPointerDown"==c){if(b.srcElement!=a.canvas)return;e[d]=!0,this._handleStart(a,d,b,b.pageX,b.pageY)}else e[d]&&("MSPointerMove"==c?this._handleMove(a,d,b,b.pageX,b.pageY):("MSPointerUp"==c||"MSPointerCancel"==c)&&(delete e[d],this._handleEnd(a,d,b)))}},a._handleStart=function(a,b,c,d,e){var f=a.__touch;if(f.multitouch||!f.count){var g=f.pointers;g[b]||(g[b]=!0,f.count++,a._handlePointerDown(b,c,d,e))}},a._handleMove=function(a,b,c,d,e){a.__touch.pointers[b]&&a._handlePointerMove(b,c,d,e)},a._handleEnd=function(a,b,c){var d=a.__touch,e=d.pointers;e[b]&&(d.count--,a._handlePointerUp(b,c,!0),delete e[b])},createjs.Touch=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype;a.NONE=0,a.LOOP=1,a.REVERSE=2,a.IGNORE={},a._tweens=[],a._plugins={},a.get=function(b,c,d,e){return e&&a.removeTweens(b),new a(b,c,d)},a.tick=function(b,c){for(var d=a._tweens.slice(),e=d.length-1;e>=0;e--){var f=d[e];c&&!f.ignoreGlobalPause||f._paused||f.tick(f._useTicks?1:b)}},createjs.Ticker&&createjs.Ticker.addListener(a,!1),a.removeTweens=function(b){if(b.tweenjs_count){for(var c=a._tweens,d=c.length-1;d>=0;d--)c[d]._target==b&&(c[d]._paused=!0,c.splice(d,1));b.tweenjs_count=0}},a.removeAllTweens=function(){for(var b=a._tweens,c=0,d=b.length;d>c;c++){var e=b[c];e.paused=!0,e.target.tweenjs_count=0}b.length=0},a.hasActiveTweens=function(b){return b?b.tweenjs_count:a._tweens&&a._tweens.length},a.installPlugin=function(b,c){var d=b.priority;null==d&&(b.priority=d=0);for(var e=0,f=c.length,g=a._plugins;f>e;e++){var h=c[e];if(g[h]){for(var i=g[h],j=0,k=i.length;k>j&&!(d<i[j].priority);j++);g[h].splice(j,0,b)}else g[h]=[b]}},a._register=function(b,c){var d=b._target;if(c)d&&(d.tweenjs_count=d.tweenjs_count?d.tweenjs_count+1:1),a._tweens.push(b);else{d&&d.tweenjs_count--;var e=a._tweens.indexOf(b);-1!=e&&a._tweens.splice(e,1)}},b.addEventListener=null,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,createjs.EventDispatcher.initialize(b),b.ignoreGlobalPause=!1,b.loop=!1,b.duration=0,b.pluginData=null,b.onChange=null,b.change=null,b.target=null,b.position=null,b._paused=!1,b._curQueueProps=null,b._initQueueProps=null,b._steps=null,b._actions=null,b._prevPosition=0,b._stepPosition=0,b._prevPos=-1,b._target=null,b._useTicks=!1,b.initialize=function(b,c,d){this.target=this._target=b,c&&(this._useTicks=c.useTicks,this.ignoreGlobalPause=c.ignoreGlobalPause,this.loop=c.loop,this.onChange=c.onChange,c.override&&a.removeTweens(b)),this.pluginData=d||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],c&&c.paused?this._paused=!0:a._register(this,!0),c&&null!=c.position&&this.setPosition(c.position,a.NONE)},b.wait=function(a){if(null==a||0>=a)return this;var b=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:b,e:this._linearEase,p1:b})},b.to=function(a,b,c){return(isNaN(b)||0>b)&&(b=0),this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(a))})},b.call=function(a,b,c){return this._addAction({f:a,p:b?b:[this],o:c?c:this._target})},b.set=function(a,b){return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})},b.play=function(a){return this.call(a.setPaused,[!1],a)},b.pause=function(a){return a||(a=this),this.call(a.setPaused,[!0],a)},b.setPosition=function(a,b){0>a&&(a=0),null==b&&(b=1);var c=a,d=!1;if(c>=this.duration&&(this.loop?c%=this.duration:(c=this.duration,d=!0)),c==this._prevPos)return d;var e=this._prevPos;if(this.position=this._prevPos=c,this._prevPosition=a,this._target)if(d)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var f=0,g=this._steps.length;g>f&&!(this._steps[f].t>c);f++);var h=this._steps[f-1];this._updateTargetProps(h,(this._stepPosition=c-h.t)/h.d)}return 0!=b&&this._actions.length>0&&(this._useTicks?this._runActions(c,c):1==b&&e>c?(e!=this.duration&&this._runActions(e,this.duration),this._runActions(0,c,!0)):this._runActions(e,c)),d&&this.setPaused(!0),this.onChange&&this.onChange(this),this.dispatchEvent("change"),d},b.tick=function(a){this._paused||this.setPosition(this._prevPosition+a)
},b.setPaused=function(b){return this._paused=!!b,a._register(this,!b),this},b.w=b.wait,b.t=b.to,b.c=b.call,b.s=b.set,b.toString=function(){return"[Tween]"},b.clone=function(){throw"Tween can not be cloned."},b._updateTargetProps=function(b,c){var d,e,f,g,h,i;b||1!=c?(b.e&&(c=b.e(c,0,1,1)),d=b.p0,e=b.p1):d=e=this._curQueueProps;for(n in this._initQueueProps){null==(g=d[n])&&(d[n]=g=this._initQueueProps[n]),null==(h=e[n])&&(e[n]=h=g),f=g==h||0==c||1==c||"number"!=typeof g?1==c?h:g:g+(h-g)*c;var j=!1;if(i=a._plugins[n])for(var k=0,l=i.length;l>k;k++){var m=i[k].tween(this,n,f,d,e,c,!!b&&d==e,!b);m==a.IGNORE?j=!0:f=m}j||(this._target[n]=f)}},b._runActions=function(a,b,c){var d=a,e=b,f=-1,g=this._actions.length,h=1;for(a>b&&(d=b,e=a,f=g,g=h=-1);(f+=h)!=g;){var i=this._actions[f],j=i.t;(j==e||j>d&&e>j||c&&j==a)&&i.f.apply(i.o,i.p)}},b._appendQueueProps=function(b){var c,d,e,f,g;for(var h in b){if(void 0===this._initQueueProps[h]){if(d=this._target[h],c=a._plugins[h])for(e=0,f=c.length;f>e;e++)d=c[e].init(this,h,d);this._initQueueProps[h]=void 0===d?null:d}else d=this._curQueueProps[h];if(c=a._plugins[h])for(g=g||{},e=0,f=c.length;f>e;e++)c[e].step&&c[e].step(this,h,d,b[h],g);this._curQueueProps[h]=b[h]}return g&&this._appendQueueProps(g),this._curQueueProps},b._cloneProps=function(a){var b={};for(var c in a)b[c]=a[c];return b},b._addStep=function(a){return a.d>0&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d),this},b._addAction=function(a){return a.t=this.duration,this._actions.push(a),this},b._set=function(a,b){for(var c in a)b[c]=a[c]},createjs.Tween=a}(),this.createjs=this.createjs||{},function(){var a=function(a,b,c){this.initialize(a,b,c)},b=a.prototype;b.ignoreGlobalPause=!1,b.duration=0,b.loop=!1,b.onChange=null,b.position=null,b._paused=!1,b._tweens=null,b._labels=null,b._prevPosition=0,b._prevPos=-1,b._useTicks=!1,b.initialize=function(a,b,c){this._tweens=[],c&&(this._useTicks=c.useTicks,this.loop=c.loop,this.ignoreGlobalPause=c.ignoreGlobalPause,this.onChange=c.onChange),a&&this.addTween.apply(this,a),this.setLabels(b),c&&c.paused?this._paused=!0:createjs.Tween._register(this,!0),c&&null!=c.position&&this.setPosition(c.position,createjs.Tween.NONE)},b.addTween=function(a){var b=arguments.length;if(b>1){for(var c=0;b>c;c++)this.addTween(arguments[c]);return arguments[0]}return 0==b?null:(this.removeTween(a),this._tweens.push(a),a.setPaused(!0),a._paused=!1,a._useTicks=this._useTicks,a.duration>this.duration&&(this.duration=a.duration),this._prevPos>=0&&a.setPosition(this._prevPos,createjs.Tween.NONE),a)},b.removeTween=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;b>d;d++)c=c&&this.removeTween(arguments[d]);return c}if(0==b)return!1;var e=this._tweens.indexOf(a);return-1!=e?(this._tweens.splice(e,1),a.duration>=this.duration&&this.updateDuration(),!0):!1},b.addLabel=function(a,b){this._labels[a]=b},b.setLabels=function(a){this._labels=a?a:{}},b.gotoAndPlay=function(a){this.setPaused(!1),this._goto(a)},b.gotoAndStop=function(a){this.setPaused(!0),this._goto(a)},b.setPosition=function(a,b){0>a&&(a=0);var c=this.loop?a%this.duration:a,d=!this.loop&&a>=this.duration;if(c==this._prevPos)return d;this._prevPosition=a,this.position=this._prevPos=c;for(var e=0,f=this._tweens.length;f>e;e++)if(this._tweens[e].setPosition(c,b),c!=this._prevPos)return!1;return d&&this.setPaused(!0),this.onChange&&this.onChange(this),d},b.setPaused=function(a){this._paused=!!a,createjs.Tween._register(this,!a)},b.updateDuration=function(){this.duration=0;for(var a=0,b=this._tweens.length;b>a;a++){var c=this._tweens[a];c.duration>this.duration&&(this.duration=c.duration)}},b.tick=function(a){this.setPosition(this._prevPosition+a)},b.resolve=function(a){var b=parseFloat(a);return isNaN(b)&&(b=this._labels[a]),b},b.toString=function(){return"[Timeline]"},b.clone=function(){throw"Timeline can not be cloned."},b._goto=function(a){var b=this.resolve(a);null!=b&&this.setPosition(b)},createjs.Timeline=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"Ease cannot be instantiated."};a.linear=function(a){return a},a.none=a.linear,a.get=function(a){return-1>a&&(a=-1),a>1&&(a=1),function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}},a.getPowIn=function(a){return function(b){return Math.pow(b,a)}},a.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}},a.getPowInOut=function(a){return function(b){return(b*=2)<1?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}},a.quadIn=a.getPowIn(2),a.quadOut=a.getPowOut(2),a.quadInOut=a.getPowInOut(2),a.cubicIn=a.getPowIn(3),a.cubicOut=a.getPowOut(3),a.cubicInOut=a.getPowInOut(3),a.quartIn=a.getPowIn(4),a.quartOut=a.getPowOut(4),a.quartInOut=a.getPowInOut(4),a.quintIn=a.getPowIn(5),a.quintOut=a.getPowOut(5),a.quintInOut=a.getPowInOut(5),a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)},a.sineOut=function(a){return Math.sin(a*Math.PI/2)},a.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)},a.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}},a.backIn=a.getBackIn(1.7),a.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}},a.backOut=a.getBackOut(1.7),a.getBackInOut=function(a){return a*=1.525,function(b){return(b*=2)<1?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}},a.backInOut=a.getBackInOut(1.7),a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)},a.circOut=function(a){return Math.sqrt(1- --a*a)},a.circInOut=function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},a.bounceIn=function(b){return 1-a.bounceOut(1-b)},a.bounceOut=function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},a.bounceInOut=function(b){return.5>b?.5*a.bounceIn(2*b):.5*a.bounceOut(2*b-1)+.5},a.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b))}},a.elasticIn=a.getElasticIn(1,.3),a.getElasticOut=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*c/b)+1}},a.elasticOut=a.getElasticOut(1,.3),a.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var e=b/c*Math.asin(1/a);return(d*=2)<1?-.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b):.5*a*Math.pow(2,-10*(d-=1))*Math.sin((d-e)*c/b)+1}},a.elasticInOut=a.getElasticInOut(1,.3*1.5),createjs.Ease=a}(),this.createjs=this.createjs||{},function(){var a=function(){throw"MotionGuidePlugin cannot be instantiated."};a.priority=0,a.install=function(){return createjs.Tween.installPlugin(a,["guide","x","y","rotation"]),createjs.Tween.IGNORE},a.init=function(a,b,c){var d=a.target;return d.hasOwnProperty("x")||(d.x=0),d.hasOwnProperty("y")||(d.y=0),d.hasOwnProperty("rotation")||(d.rotation=0),"guide"==b?null:c},a.step=function(b,c,d,e,f){if("guide"!=c)return e;var g,h=e;h.hasOwnProperty("path")||(h.path=[]);var i=h.path;if(h.hasOwnProperty("end")||(h.end=1),h.hasOwnProperty("start")||(h.start=d&&d.hasOwnProperty("end")&&d.path===i?d.end:0),h.hasOwnProperty("_segments")&&h._length)return e;var j=i.length,k=10;if(!(j>=6&&0==(j-2)%4))throw"invalid 'path' data, please see documentation for valid paths";h._segments=[],h._length=0;for(var l=2;j>l;l+=4){for(var m,n,o=i[l-2],p=i[l-1],q=i[l+0],r=i[l+1],s=i[l+2],t=i[l+3],u=o,v=p,w=0,x=[],y=1;k>=y;y++){var z=y/k,A=1-z;m=A*A*o+2*A*z*q+z*z*s,n=A*A*p+2*A*z*r+z*z*t,w+=x[x.push(Math.sqrt((g=m-u)*g+(g=n-v)*g))-1],u=m,v=n}h._segments.push(w),h._segments.push(x),h._length+=w}return g=h.orient,h.orient=!1,a.calc(h,h.end,f),h.orient=g,e},a.tween=function(b,c,d,e,f,g,h){var i=f.guide;if(void 0==i||i===e.guide)return d;if(i.lastRatio!=g){var j=(i.end-i.start)*(h?i.end:g)+i.start;a.calc(i,j,b.target),i.orient&&(b.target.rotation+=e.rotation||0),i.lastRatio=g}return i.orient||"rotation"!=c?b.target[c]:d},a.calc=function(b,c,d){void 0==b._segments&&a.validate(b),void 0==d&&(d={x:0,y:0,rotation:0});for(var e=b._segments,f=b.path,g=b._length*c,h=e.length-2,i=0;g>e[i]&&h>i;)g-=e[i],i+=2;var j=e[i+1],k=0;for(h=j.length-1;g>j[k]&&h>k;)g-=j[k],k++;var l=k/++h+g/(h*j[k]);i=2*i+2;var m=1-l;return d.x=m*m*f[i-2]+2*m*l*f[i+0]+l*l*f[i+2],d.y=m*m*f[i-1]+2*m*l*f[i+1]+l*l*f[i+3],b.orient&&(d.rotation=57.2957795*Math.atan2((f[i+1]-f[i-1])*m+(f[i+3]-f[i+1])*l,(f[i+0]-f[i-2])*m+(f[i+2]-f[i+0])*l)),d},createjs.MotionGuidePlugin=a}(),function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(void 0===this||null===this)throw new TypeError;var c,d=Object(this),e=d.length>>>0,f=0;if("function"!=typeof b)throw new TypeError;if(0==e&&1==arguments.length)throw new TypeError;if(arguments.length>=2)c=arguments[1];else for(;;){if(f in d){c=d[f++];break}if(++f>=e)throw new TypeError}for(;e>f;)f in d&&(c=b.call(a,c,d[f],f,d)),f++;return c})}();var Zepto=function(){function a(a){return null==a?String(a):W[X.call(a)]||"object"}function b(b){return"function"==a(b)}function c(a){return null!=a&&a==a.window}function d(a){return null!=a&&a.nodeType==a.DOCUMENT_NODE}function e(b){return"object"==a(b)}function f(a){return e(a)&&!c(a)&&a.__proto__==Object.prototype}function g(a){return a instanceof Array}function h(a){return"number"==typeof a.length}function i(a){return E.call(a,function(a){return null!=a})}function j(a){return a.length>0?y.fn.concat.apply([],a):a}function k(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(a){return a in H?H[a]:H[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function m(a,b){return"number"!=typeof b||J[k(a)]?b:b+"px"}function n(a){var b,c;return G[a]||(b=F.createElement(a),F.body.appendChild(b),c=I(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),G[a]=c),G[a]}function o(a){return"children"in a?D.call(a.children):y.map(a.childNodes,function(a){return 1==a.nodeType?a:void 0})}function p(a,b,c){for(x in b)c&&(f(b[x])||g(b[x]))?(f(b[x])&&!f(a[x])&&(a[x]={}),g(b[x])&&!g(a[x])&&(a[x]=[]),p(a[x],b[x],c)):b[x]!==w&&(a[x]=b[x])}function q(a,b){return b===w?y(a):y(a).filter(b)}function r(a,c,d,e){return b(c)?c.call(a,d,e):c}function s(a,b,c){null==c?a.removeAttribute(b):a.setAttribute(b,c)}function t(a,b){var c=a.className,d=c&&c.baseVal!==w;return b===w?d?c.baseVal:c:(d?c.baseVal=b:a.className=b,void 0)}function u(a){var b;try{return a?"true"==a||("false"==a?!1:"null"==a?null:isNaN(b=Number(a))?/^[\[\{]/.test(a)?y.parseJSON(a):a:b):a}catch(c){return a}}function v(a,b){b(a);for(var c in a.childNodes)v(a.childNodes[c],b)}var w,x,y,z,A,B,C=[],D=C.slice,E=C.filter,F=window.document,G={},H={},I=F.defaultView.getComputedStyle,J={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},K=/^\s*<(\w+|!)[^>]*>/,L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,M=/^(?:body|html)$/i,N=["val","css","html","text","data","width","height","offset"],O=["after","prepend","before","append"],P=F.createElement("table"),Q=F.createElement("tr"),R={tr:F.createElement("tbody"),tbody:P,thead:P,tfoot:P,td:Q,th:Q,"*":F.createElement("div")},S=/complete|loaded|interactive/,T=/^\.([\w-]+)$/,U=/^#([\w-]*)$/,V=/^[\w-]+$/,W={},X=W.toString,Y={},Z=F.createElement("div");return Y.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=Z).appendChild(a),d=~Y.qsa(e,b).indexOf(a),f&&Z.removeChild(a),d},A=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},B=function(a){return E.call(a,function(b,c){return a.indexOf(b)==c})},Y.fragment=function(a,b,c){a.replace&&(a=a.replace(L,"<$1></$2>")),b===w&&(b=K.test(a)&&RegExp.$1),b in R||(b="*");var d,e,g=R[b];return g.innerHTML=""+a,e=y.each(D.call(g.childNodes),function(){g.removeChild(this)}),f(c)&&(d=y(e),y.each(c,function(a,b){N.indexOf(a)>-1?d[a](b):d.attr(a,b)})),e},Y.Z=function(a,b){return a=a||[],a.__proto__=y.fn,a.selector=b||"",a},Y.isZ=function(a){return a instanceof Y.Z},Y.init=function(a,c){if(a){if(b(a))return y(F).ready(a);if(Y.isZ(a))return a;var d;if(g(a))d=i(a);else if(e(a))d=[f(a)?y.extend({},a):a],a=null;else if(K.test(a))d=Y.fragment(a.trim(),RegExp.$1,c),a=null;else{if(c!==w)return y(c).find(a);d=Y.qsa(F,a)}return Y.Z(d,a)}return Y.Z()},y=function(a,b){return Y.init(a,b)},y.extend=function(a){var b,c=D.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){p(a,c,b)}),a},Y.qsa=function(a,b){var c;return d(a)&&U.test(b)?(c=a.getElementById(RegExp.$1))?[c]:[]:1!==a.nodeType&&9!==a.nodeType?[]:D.call(T.test(b)?a.getElementsByClassName(RegExp.$1):V.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},y.contains=function(a,b){return a!==b&&a.contains(b)},y.type=a,y.isFunction=b,y.isWindow=c,y.isArray=g,y.isPlainObject=f,y.isEmptyObject=function(a){var b;for(b in a)return!1;return!0},y.inArray=function(a,b,c){return C.indexOf.call(b,a,c)},y.camelCase=A,y.trim=function(a){return a.trim()},y.uuid=0,y.support={},y.expr={},y.map=function(a,b){var c,d,e,f=[];if(h(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&f.push(c);else for(e in a)c=b(a[e],e),null!=c&&f.push(c);return j(f)},y.each=function(a,b){var c,d;if(h(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},y.grep=function(a,b){return E.call(a,b)},window.JSON&&(y.parseJSON=JSON.parse),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()}),y.fn={forEach:C.forEach,reduce:C.reduce,push:C.push,sort:C.sort,indexOf:C.indexOf,concat:C.concat,map:function(a){return y(y.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return y(D.apply(this,arguments))},ready:function(a){return S.test(F.readyState)?a(y):F.addEventListener("DOMContentLoaded",function(){a(y)},!1),this},get:function(a){return a===w?D.call(this):this[a>=0?a:a+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return C.every.call(this,function(b,c){return a.call(b,c,b)!==!1}),this},filter:function(a){return b(a)?this.not(this.not(a)):y(E.call(this,function(b){return Y.matches(b,a)}))},add:function(a,b){return y(B(this.concat(y(a,b))))},is:function(a){return this.length>0&&Y.matches(this[0],a)},not:function(a){var c=[];if(b(a)&&a.call!==w)this.each(function(b){a.call(this,b)||c.push(this)});else{var d="string"==typeof a?this.filter(a):h(a)&&b(a.item)?D.call(a):y(a);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return y(c)},has:function(a){return this.filter(function(){return e(a)?y.contains(this,a):y(this).find(a).size()})},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!e(a)?a:y(a)},last:function(){var a=this[this.length-1];return a&&!e(a)?a:y(a)},find:function(a){var b,c=this;return b="object"==typeof a?y(a).filter(function(){var a=this;return C.some.call(c,function(b){return y.contains(b,a)})}):1==this.length?y(Y.qsa(this[0],a)):this.map(function(){return Y.qsa(this,a)})},closest:function(a,b){var c=this[0],e=!1;for("object"==typeof a&&(e=y(a));c&&!(e?e.indexOf(c)>=0:Y.matches(c,a));)c=c!==b&&!d(c)&&c.parentNode;return y(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=y.map(c,function(a){return(a=a.parentNode)&&!d(a)&&b.indexOf(a)<0?(b.push(a),a):void 0});return q(b,a)},parent:function(a){return q(B(this.pluck("parentNode")),a)},children:function(a){return q(this.map(function(){return o(this)}),a)},contents:function(){return this.map(function(){return D.call(this.childNodes)})},siblings:function(a){return q(this.map(function(a,b){return E.call(o(b.parentNode),function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return y.map(this,function(b){return b[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==I(this,"").getPropertyValue("display")&&(this.style.display=n(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){var c=b(a);if(this[0]&&!c)var d=y(a).get(0),e=d.parentNode||this.length>1;return this.each(function(b){y(this).wrapAll(c?a.call(this,b):e?d.cloneNode(!0):d)})},wrapAll:function(a){if(this[0]){y(this[0]).before(a=y(a));for(var b;(b=a.children()).length;)a=b.first();y(a).append(this)}return this},wrapInner:function(a){var c=b(a);return this.each(function(b){var d=y(this),e=d.contents(),f=c?a.call(this,b):a;e.length?e.wrapAll(f):d.append(f)})},unwrap:function(){return this.parent().each(function(){y(this).replaceWith(y(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(a){return this.each(function(){var b=y(this);(a===w?"none"==b.css("display"):a)?b.show():b.hide()})},prev:function(a){return y(this.pluck("previousElementSibling")).filter(a||"*")},next:function(a){return y(this.pluck("nextElementSibling")).filter(a||"*")},html:function(a){return a===w?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;y(this).empty().append(r(this,a,b,c))})},text:function(a){return a===w?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,b){var c;return"string"==typeof a&&b===w?0==this.length||1!==this[0].nodeType?w:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(c=this[0].getAttribute(a))&&a in this[0]?this[0][a]:c:this.each(function(c){if(1===this.nodeType)if(e(a))for(x in a)s(this,x,a[x]);else s(this,a,r(this,b,c,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&s(this,a)})},prop:function(a,b){return b===w?this[0]&&this[0][a]:this.each(function(c){this[a]=r(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+k(a),b);return null!==c?u(c):w},val:function(a){return a===w?this[0]&&(this[0].multiple?y(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(b){this.value=r(this,a,b,this.value)})},offset:function(a){if(a)return this.each(function(b){var c=y(this),d=r(this,a,b,c.offset()),e=c.offsetParent().offset(),f={top:d.top-e.top,left:d.left-e.left};"static"==c.css("position")&&(f.position="relative"),c.css(f)});if(0==this.length)return null;var b=this[0].getBoundingClientRect();return{left:b.left+window.pageXOffset,top:b.top+window.pageYOffset,width:Math.round(b.width),height:Math.round(b.height)}},css:function(b,c){if(arguments.length<2&&"string"==typeof b)return this[0]&&(this[0].style[A(b)]||I(this[0],"").getPropertyValue(b));var d="";if("string"==a(b))c||0===c?d=k(b)+":"+m(b,c):this.each(function(){this.style.removeProperty(k(b))});else for(x in b)b[x]||0===b[x]?d+=k(x)+":"+m(x,b[x])+";":this.each(function(){this.style.removeProperty(k(x))});return this.each(function(){this.style.cssText+=";"+d})},index:function(a){return a?this.indexOf(y(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return C.some.call(this,function(a){return this.test(t(a))},l(a))},addClass:function(a){return this.each(function(b){z=[];var c=t(this),d=r(this,a,b,c);d.split(/\s+/g).forEach(function(a){y(this).hasClass(a)||z.push(a)},this),z.length&&t(this,c+(c?" ":"")+z.join(" "))})},removeClass:function(a){return this.each(function(b){return a===w?t(this,""):(z=t(this),r(this,a,b,z).split(/\s+/g).forEach(function(a){z=z.replace(l(a)," ")}),t(this,z.trim()),void 0)})},toggleClass:function(a,b){return this.each(function(c){var d=y(this),e=r(this,a,c,t(this));e.split(/\s+/g).forEach(function(a){(b===w?!d.hasClass(a):b)?d.addClass(a):d.removeClass(a)})})},scrollTop:function(){return this.length?"scrollTop"in this[0]?this[0].scrollTop:this[0].scrollY:void 0},position:function(){if(this.length){var a=this[0],b=this.offsetParent(),c=this.offset(),d=M.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(y(a).css("margin-top"))||0,c.left-=parseFloat(y(a).css("margin-left"))||0,d.top+=parseFloat(y(b[0]).css("border-top-width"))||0,d.left+=parseFloat(y(b[0]).css("border-left-width"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||F.body;a&&!M.test(a.nodeName)&&"static"==y(a).css("position");)a=a.offsetParent;return a})}},y.fn.detach=y.fn.remove,["width","height"].forEach(function(a){y.fn[a]=function(b){var e,f=this[0],g=a.replace(/./,function(a){return a[0].toUpperCase()});return b===w?c(f)?f["inner"+g]:d(f)?f.documentElement["offset"+g]:(e=this.offset())&&e[a]:this.each(function(c){f=y(this),f.css(a,r(this,b,c,f[a]()))})}}),O.forEach(function(b,c){var d=c%2;y.fn[b]=function(){var b,e,f=y.map(arguments,function(c){return b=a(c),"object"==b||"array"==b||null==c?c:Y.fragment(c)}),g=this.length>1;return f.length<1?this:this.each(function(a,b){e=d?b:b.parentNode,b=0==c?b.nextSibling:1==c?b.firstChild:2==c?b:null,f.forEach(function(a){if(g)a=a.cloneNode(!0);else if(!e)return y(a).remove();v(e.insertBefore(a,b),function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||a.src||window.eval.call(window,a.innerHTML)})})})},y.fn[d?b+"To":"insert"+(c?"Before":"After")]=function(a){return y(a)[b](this),this}}),Y.Z.prototype=y.fn,Y.uniq=B,Y.deserializeValue=u,y.zepto=Y,y}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/),m=a.match(/(BB10).*Version\/([\d.]+)/),n=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),o=a.match(/PlayBook/),p=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),q=a.match(/Firefox\/([\d.]+)/);(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),m&&(b.bb10=!0,b.version=m[2]),n&&(b.rimtabletos=!0,b.version=n[2]),o&&(c.playbook=!0),j&&(b.kindle=!0,b.version=j[1]),k&&(c.silk=!0,c.version=k[1]),!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),p&&(c.chrome=!0,c.version=p[1]),q&&(c.firefox=!0,c.version=q[1]),b.tablet=!!(f||o||e&&!a.match(/Mobile/)||q&&a.match(/Tablet/)),b.phone=!(b.tablet||!(e||g||h||l||m||p&&a.match(/Android/)||p&&a.match(/CriOS\/([\d.]+)/)||q&&a.match(/Mobile/)))}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a){function b(a){return a._zid||(a._zid=n++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(m[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(b,c,d){"string"!=a.type(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function g(a,b){return a.del&&("focus"==a.e||"blur"==a.e)||!!b}function h(a){return p[a]||a}function i(c,e,i,j,k,l){var n=b(c),o=m[n]||(m[n]=[]);f(e,i,function(b,e){var f=d(b);f.fn=e,f.sel=j,f.e in p&&(e=function(b){var c=b.relatedTarget;return!c||c!==this&&!a.contains(this,c)?f.fn.apply(this,arguments):void 0}),f.del=k&&k(e,b);var i=f.del||e;f.proxy=function(a){var b=i.apply(c,[a].concat(a.data));return b===!1&&(a.preventDefault(),a.stopPropagation()),b},f.i=o.length,o.push(f),c.addEventListener(h(f.e),f.proxy,g(f,l))})}function j(a,d,e,i,j){var k=b(a);f(d||"",e,function(b,d){c(a,b,d,i).forEach(function(b){delete m[k][b.i],a.removeEventListener(h(b.e),b.proxy,g(b,j))})})}function k(b){var c,d={originalEvent:b};for(c in b)s.test(c)||void 0===b[c]||(d[c]=b[c]);return a.each(t,function(a,c){d[a]=function(){return this[c]=q,b[a].apply(b,arguments)},d[c]=r}),d}function l(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var m=(a.zepto.qsa,{}),n=1,o={},p={mouseenter:"mouseover",mouseleave:"mouseout"};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",a.event={add:i,remove:j},a.proxy=function(c,d){if(a.isFunction(c)){var e=function(){return c.apply(d,arguments)};return e._zid=b(c),e}if("string"==typeof d)return a.proxy(c[d],c);throw new TypeError("expected function")},a.fn.bind=function(a,b){return this.each(function(){i(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){j(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){i(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return j(d,b,a),c}})})};var q=function(){return!0},r=function(){return!1},s=/^([A-Z]|layer[XY]$)/,t={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){return this.each(function(e,f){i(f,c,d,b,function(c){return function(d){var e,g=a(d.target).closest(b,f).get(0);return g?(e=a.extend(k(d),{currentTarget:g,liveFired:f}),c.apply(g,[e].concat([].slice.call(arguments,1)))):void 0}})})},a.fn.undelegate=function(a,b,c){return this.each(function(){j(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return!c||a.isFunction(c)?this.bind(b,c||d):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return!c||a.isFunction(c)?this.unbind(b,c||d):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){return("string"==typeof b||a.isPlainObject(b))&&(b=a.Event(b)),l(b),b.data=c,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=k("string"==typeof b?a.Event(b):b),e.data=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.trigger(b)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){return a?this.bind(b,a):this.each(function(){try{this[b]()}catch(a){}}),this}}),a.Event=function(a,b){"string"!=typeof a&&(b=a,a=b.type);var c=document.createEvent(o[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c.isDefaultPrevented=function(){return this.defaultPrevented},c}}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.defaultPrevented}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:(c(b,d,"ajaxSend",[a,b]),void 0)}function g(a,b,d){var e=d.context,f="success";d.success.call(e,a,f,b),c(d,e,"ajaxSuccess",[b,d,a]),i(f,b,d)}function h(a,b,d,e){var f=e.context;e.error.call(f,d,b,a),c(e,f,"ajaxError",[d,e,a]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a=a.split(";",2)[0]),a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){b.processData&&b.data&&"string"!=a.type(b.data)&&(b.data=a.param(b.data,b.traditional)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data))}function n(b,c,d,e){var f=!a.isFunction(c);return{url:b,data:f?c:void 0,success:f?a.isFunction(d)?d:void 0:c,dataType:f?e||d:d}}function o(b,c,d,e){var f,g=a.isArray(c);a.each(c,function(c,h){f=a.type(h),e&&(c=d?e:e+"["+(g?"":c)+"]"),!e&&g?b.add(h.name,h.value):"array"==f||!d&&"object"==f?o(b,h,d,c):b.add(c,h)})}var p,q,r=0,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b){if(!("type"in b))return a.ajax(b);var c,d="jsonp"+ ++r,e=s.createElement("script"),i=function(){clearTimeout(c),a(e).remove(),delete window[d]},k=function(a){i(),a&&"timeout"!=a||(window[d]=j),h(null,a||"abort",l,b)},l={abort:k};return f(l,b)===!1?(k("abort"),!1):(window[d]=function(a){i(),g(a,l,b)},e.onerror=function(){k("error")},e.src=b.url.replace(/=\?/,"="+d),a("head").append(e),b.timeout>0&&(c=setTimeout(function(){k("timeout")},b.timeout)),l)},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},a.ajax=function(b){var c=a.extend({},b||{});for(p in a.ajaxSettings)void 0===c[p]&&(c[p]=a.ajaxSettings[p]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host),c.url||(c.url=window.location.toString()),m(c),c.cache===!1&&(c.url=l(c.url,"_="+Date.now()));var e=c.dataType,i=/=\?/.test(c.url);if("jsonp"==e||i)return i||(c.url=l(c.url,"callback=?")),a.ajaxJSONP(c);var n,o=c.accepts[e],r={},s=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,t=c.xhr();c.crossDomain||(r["X-Requested-With"]="XMLHttpRequest"),o&&(r.Accept=o,o.indexOf(",")>-1&&(o=o.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(o)),(c.contentType||c.contentType!==!1&&c.data&&"GET"!=c.type.toUpperCase())&&(r["Content-Type"]=c.contentType||"application/x-www-form-urlencoded"),c.headers=a.extend(r,c.headers||{}),t.onreadystatechange=function(){if(4==t.readyState){t.onreadystatechange=j,clearTimeout(n);var b,d=!1;if(t.status>=200&&t.status<300||304==t.status||0==t.status&&"file:"==s){e=e||k(t.getResponseHeader("content-type")),b=t.responseText;try{"script"==e?(1,eval)(b):"xml"==e?b=t.responseXML:"json"==e&&(b=y.test(b)?null:a.parseJSON(b))}catch(f){d=f}d?h(d,"parsererror",t,c):g(b,t,c)}else h(null,t.status?"error":"abort",t,c)}};var u="async"in c?c.async:!0;t.open(c.type,c.url,u);for(q in c.headers)t.setRequestHeader(q,c.headers[q]);return f(t,c)===!1?(t.abort(),!1):(c.timeout>0&&(n=setTimeout(function(){t.onreadystatechange=j,t.abort(),h(null,"timeout",t,c)},c.timeout)),t.send(c.data?c.data:null),t)},a.get=function(){return a.ajax(n.apply(null,arguments))},a.post=function(){var b=n.apply(null,arguments);return b.type="POST",a.ajax(b)},a.getJSON=function(){var b=n.apply(null,arguments);return b.dataType="json",a.ajax(b)},a.fn.load=function(b,c,d){if(!this.length)return this;var e,f=this,g=b.split(/\s/),h=n(b,c,d),i=h.success;return g.length>1&&(h.url=g[0],e=g[1]),h.success=function(b){f.html(e?a("<div>").html(b.replace(t,"")).find(e):b),i&&i.apply(f,arguments)},a.ajax(h),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},o(c,a,b),c.join("&").replace(/%20/g,"+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c=[];return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){b=a(this);var d=b.attr("type");
"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&c.push({name:b.attr("name"),value:b.val()})}),c},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a,b){function c(a){return d(a.replace(/([a-z])([A-Z])/,"$1-$2"))}function d(a){return a.toLowerCase()}function e(a){return f?f+a:d(a)}var f,g,h,i,j,k,l,m,n="",o={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},p=window.document,q=p.createElement("div"),r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,s={};a.each(o,function(a,c){return q.style[a+"TransitionProperty"]!==b?(n="-"+d(a)+"-",f=c,!1):void 0}),g=n+"transform",s[h=n+"transition-property"]=s[i=n+"transition-duration"]=s[j=n+"transition-timing-function"]=s[k=n+"animation-name"]=s[l=n+"animation-duration"]=s[m=n+"animation-timing-function"]="",a.fx={off:f===b&&q.style.transitionProperty===b,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:e("TransitionEnd"),animationEnd:e("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isPlainObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c=("number"==typeof c?c:a.fx.speeds[c]||a.fx.speeds._default)/1e3),this.anim(b,c,d,e)},a.fn.anim=function(d,e,f,n){var o,p,q,t={},u="",v=this,w=a.fx.transitionEnd;if(e===b&&(e=.4),a.fx.off&&(e=0),"string"==typeof d)t[k]=d,t[l]=e+"s",t[m]=f||"linear",w=a.fx.animationEnd;else{p=[];for(o in d)r.test(o)?u+=o+"("+d[o]+") ":(t[o]=d[o],p.push(c(o)));u&&(t[g]=u,p.push(g)),e>0&&"object"==typeof d&&(t[h]=p.join(", "),t[i]=e+"s",t[j]=f||"linear")}return q=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(w,q)}a(this).css(s),n&&n.call(this)},e>0&&this.bind(w,q),this.size()&&this.get(0).clientLeft,this.css(t),0>=e&&setTimeout(function(){v.each(function(){q.call(this)})},0),this},q=null}(Zepto),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=[].slice,n=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},o={}.hasOwnProperty,p=function(a,b){function c(){this.constructor=a}for(var d in b)o.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},q=function(a,b){return function(){return a.apply(b,arguments)}};c={bind:function(a,b){var c,d,e,f,g;for(d=a.split(" "),c=this.hasOwnProperty("_callbacks")&&this._callbacks||(this._callbacks={}),f=0,g=d.length;g>f;f++)e=d[f],c[e]||(c[e]=[]),c[e].push(b);return this},one:function(a,b){var c;return this.bind(a,c=function(){return this.unbind(a,c),b.apply(this,arguments)})},trigger:function(){var a,b,c,d,e,f,g;if(a=1<=arguments.length?m.call(arguments,0):[],c=a.shift(),d=this.hasOwnProperty("_callbacks")&&(null!=(g=this._callbacks)?g[c]:void 0)){for(e=0,f=d.length;f>e&&(b=d[e],b.apply(this,a)!==!1);e++);return!0}},listenTo:function(a,b,c){return a.bind(b,c),this.listeningTo||(this.listeningTo=[]),this.listeningTo.push(a),this},listenToOnce:function(a,b,c){var d;return d=this.listeningToOnce||(this.listeningToOnce=[]),d.push(a),a.one(b,function(){var b;return b=d.indexOf(a),-1!==b&&d.splice(b,1),c.apply(this,arguments)}),this},stopListening:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,o,p;if(0===arguments.length){for(f=[],m=[this.listeningTo,this.listeningToOnce],g=0,j=m.length;j>g;g++)if(e=m[g])for(h=0,k=e.length;k>h;h++)a=e[h],n.call(f,a)>=0||(a.unbind(),f.push(a));return this.listeningTo=void 0,this.listeningToOnce=void 0}if(a){for(b&&a.unbind(b,c),b||a.unbind(),o=[this.listeningTo,this.listeningToOnce],p=[],i=0,l=o.length;l>i;i++)e=o[i],e&&(d=e.indexOf(a),-1!==d?p.push(e.splice(d,1)):p.push(void 0));return p}},unbind:function(a,b){var c,d,e,f,g,h,i,j,k,l;if(0===arguments.length)return this._callbacks={},this;if(!a)return this;for(d=a.split(" "),h=0,j=d.length;j>h;h++)if(g=d[h],f=null!=(l=this._callbacks)?l[g]:void 0)if(b){for(e=i=0,k=f.length;k>i;e=++i)if(c=f[e],c===b){f=f.slice(),f.splice(e,1),this._callbacks[g]=f;break}}else delete this._callbacks[g];return this}},c.on=c.bind,c.off=c.unbind,d={trace:!0,logPrefix:"(App)",log:function(){var a;return a=1<=arguments.length?m.call(arguments,0):[],this.trace?(this.logPrefix&&a.unshift(this.logPrefix),"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,a),this):void 0}},l=["included","extended"],f=function(){function a(){"function"==typeof this.init&&this.init.apply(this,arguments)}return a.include=function(a){var b,c,d;if(!a)throw new Error("include(obj) requires obj");for(b in a)c=a[b],n.call(l,b)<0&&(this.prototype[b]=c);return null!=(d=a.included)&&d.apply(this),this},a.extend=function(a){var b,c,d;if(!a)throw new Error("extend(obj) requires obj");for(b in a)c=a[b],n.call(l,b)<0&&(this[b]=c);return null!=(d=a.extended)&&d.apply(this),this},a.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a.prototype.proxy=function(a){var b=this;return function(){return a.apply(b,arguments)}},a}(),e=function(b){function d(a){d.__super__.constructor.apply(this,arguments),a&&this.load(a),this.cid=this.constructor.uid("c-")}return p(d,b),d.extend(c),d.records=[],d.irecords={},d.crecords={},d.attributes=[],d.configure=function(){var a,b;return b=arguments[0],a=2<=arguments.length?m.call(arguments,1):[],this.className=b,this.deleteAll(),a.length&&(this.attributes=a),this.attributes&&(this.attributes=k(this.attributes)),this.attributes||(this.attributes=[]),this.unbind(),this},d.toString=function(){return""+this.className+"("+this.attributes.join(", ")+")"},d.find=function(a){var b;if(b=this.exists(a),!b)throw new Error('"'+this.className+'" model could not find a record for the ID "'+a+'"');return b},d.exists=function(a){var b,c;return null!=(b=null!=(c=this.irecords[a])?c:this.crecords[a])?b.clone():void 0},d.refresh=function(a,b){var c,d,e,f,g;for(null==b&&(b={}),b.clear&&this.deleteAll(),d=this.fromJSON(a),i(d)||(d=[d]),f=0,g=d.length;g>f;f++)c=d[f],c.id&&this.irecords[c.id]?this.records[this.records.indexOf(this.irecords[c.id])]=c:(c.id||(c.id=c.cid),this.records.push(c)),this.irecords[c.id]=c,this.crecords[c.cid]=c;return this.sort(),e=this.cloneArray(d),this.trigger("refresh",this.cloneArray(d)),e},d.select=function(a){var b,c,d,e,f;for(e=this.records,f=[],c=0,d=e.length;d>c;c++)b=e[c],a(b)&&f.push(b.clone());return f},d.findByAttribute=function(a,b){var c,d,e,f;for(f=this.records,d=0,e=f.length;e>d;d++)if(c=f[d],c[a]===b)return c.clone();return null},d.findAllByAttribute=function(a,b){return this.select(function(c){return c[a]===b})},d.each=function(a){var b,c,d,e,f;for(e=this.records,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a(b.clone()));return f},d.all=function(){return this.cloneArray(this.records)},d.first=function(){var a;return null!=(a=this.records[0])?a.clone():void 0},d.last=function(){var a;return null!=(a=this.records[this.records.length-1])?a.clone():void 0},d.count=function(){return this.records.length},d.deleteAll=function(){return this.records=[],this.irecords={},this.crecords={}},d.destroyAll=function(a){var b,c,d,e,f;for(e=this.records,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.destroy(a));return f},d.update=function(a,b,c){return this.find(a).updateAttributes(b,c)},d.create=function(a,b){var c;return c=new this(a),c.save(b)},d.destroy=function(a,b){return this.find(a).destroy(b)},d.change=function(a){return"function"==typeof a?this.bind("change",a):this.trigger.apply(this,["change"].concat(m.call(arguments)))},d.fetch=function(a){return"function"==typeof a?this.bind("fetch",a):this.trigger.apply(this,["fetch"].concat(m.call(arguments)))},d.toJSON=function(){return this.records},d.fromJSON=function(a){var b,c,d,e;if(a){if("string"==typeof a&&(a=JSON.parse(a)),i(a)){for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(new this(b));return e}return new this(a)}},d.fromForm=function(){var a;return(a=new this).fromForm.apply(a,arguments)},d.sort=function(){return this.comparator&&this.records.sort(this.comparator),this.records},d.cloneArray=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(b.clone());return e},d.idCounter=0,d.uid=function(a){var b;return null==a&&(a=""),b=a+this.idCounter++,this.exists(b)&&(b=this.uid(a)),b},d.prototype.isNew=function(){return!this.exists()},d.prototype.isValid=function(){return!this.validate()},d.prototype.validate=function(){},d.prototype.load=function(a){var b,c;a.id&&(this.id=a.id);for(b in a)c=a[b],a.hasOwnProperty(b)&&"function"==typeof this[b]?this[b](c):this[b]=c;return this},d.prototype.attributes=function(){var a,b,c,d,e;for(b={},e=this.constructor.attributes,c=0,d=e.length;d>c;c++)a=e[c],a in this&&(b[a]="function"==typeof this[a]?this[a]():this[a]);return this.id&&(b.id=this.id),b},d.prototype.eql=function(a){return!!(a&&a.constructor===this.constructor&&a.cid===this.cid||a.id&&a.id===this.id)},d.prototype.save=function(a){var b,c;return null==a&&(a={}),a.validate!==!1&&(b=this.validate())?(this.trigger("error",b),!1):(this.trigger("beforeSave",a),c=this.isNew()?this.create(a):this.update(a),this.stripCloneAttrs(),this.trigger("save",a),c)},d.prototype.stripCloneAttrs=function(){var a,b;if(!this.hasOwnProperty("cid")){for(a in this)o.call(this,a)&&(b=this[a],this.constructor.attributes.indexOf(a)>-1&&delete this[a]);return this}},d.prototype.updateAttribute=function(a,b,c){var d;return d={},d[a]=b,this.updateAttributes(d,c)},d.prototype.updateAttributes=function(a,b){return this.load(a),this.save(b)},d.prototype.changeID=function(a){var b;return b=this.constructor.irecords,b[a]=b[this.id],delete b[this.id],this.id=a,this.save()},d.prototype.destroy=function(a){var b,c,d,e,f;for(null==a&&(a={}),this.trigger("beforeDestroy",a),d=this.constructor.records.slice(0),b=e=0,f=d.length;f>e;b=++e)if(c=d[b],this.eql(c)){d.splice(b,1);break}return this.constructor.records=d,delete this.constructor.irecords[this.id],delete this.constructor.crecords[this.cid],this.destroyed=!0,this.trigger("destroy",a),this.trigger("change","destroy",a),this.listeningTo&&this.stopListening(),this.unbind(),this},d.prototype.dup=function(a){var b;return b=new this.constructor(this.attributes()),a===!1?b.cid=this.cid:delete b.id,b},d.prototype.clone=function(){return h(this)},d.prototype.reload=function(){var a;return this.isNew()?this:(a=this.constructor.find(this.id),this.load(a.attributes()),a)},d.prototype.toJSON=function(){return this.attributes()},d.prototype.toString=function(){return"<"+this.constructor.className+" ("+JSON.stringify(this)+")>"},d.prototype.fromForm=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(f={},n=a(b).find("[type=checkbox]:not([value])"),g=0,j=n.length;j>g;g++)c=n[g],f[c.name]=a(c).prop("checked");for(o=a(b).find('[type=checkbox][name$="[]"]'),h=0,k=o.length;k>h;h++)c=o[h],e=c.name.replace(/\[\]$/,""),f[e]||(f[e]=[]),a(c).prop("checked")&&f[e].push(c.value);for(p=a(b).serializeArray(),i=0,l=p.length;l>i;i++)d=p[i],f[m=d.name]||(f[m]=d.value);return this.load(f)},d.prototype.exists=function(){return this.constructor.exists(this.id)},d.prototype.update=function(a){var b,c;return this.trigger("beforeUpdate",a),c=this.constructor.irecords,c[this.id].load(this.attributes()),this.constructor.sort(),b=c[this.id].clone(),b.trigger("update",a),b.trigger("change","update",a),b},d.prototype.create=function(a){var b,c;return this.trigger("beforeCreate",a),this.id||(this.id=this.cid),c=this.dup(!1),this.constructor.records.push(c),this.constructor.irecords[this.id]=c,this.constructor.crecords[this.cid]=c,this.constructor.sort(),b=c.clone(),b.trigger("create",a),b.trigger("change","create",a),b},d.prototype.bind=function(a,b){var c,d,e,f,g,h,i=this;for(this.constructor.bind(a,c=function(a){return a&&i.eql(a)?b.apply(i,arguments):void 0}),h=a.split(" "),e=function(a){var d;return i.constructor.bind("unbind",d=function(e,f,g){if(e&&i.eql(e)){if(f&&f!==a)return;if(g&&g!==b)return;return i.constructor.unbind(a,c),i.constructor.unbind("unbind",d)}})},f=0,g=h.length;g>f;f++)d=h[f],e(d);return this},d.prototype.one=function(a,b){var c,d=this;return this.bind(a,c=function(){return d.unbind(a,c),b.apply(d,arguments)})},d.prototype.trigger=function(){var a,b;return a=1<=arguments.length?m.call(arguments,0):[],a.splice(1,0,this),(b=this.constructor).trigger.apply(b,a)},d.prototype.listenTo=function(a,b,c){return a.bind(b,c),this.listeningTo||(this.listeningTo=[]),this.listeningTo.push(a)},d.prototype.listenToOnce=function(a,b,c){var d,e;return e=this.listeningToOnce||(this.listeningToOnce=[]),e.push(a),a.bind(b,d=function(){var f;return f=e.indexOf(a),-1!==f&&e.splice(f,1),a.unbind(b,d),c.apply(a,arguments)})},d.prototype.stopListening=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,o,p,q;if(0===arguments.length){for(f=[],m=[this.listeningTo,this.listeningToOnce],g=0,j=m.length;j>g;g++)if(e=m[g])for(o=this.listeningTo,h=0,k=o.length;k>h;h++)a=o[h],n.call(f,a)>=0||(a.unbind(),f.push(a));return this.listeningTo=void 0,this.listeningToOnce=void 0,void 0}if(a){for(b||a.unbind(),b&&a.unbind(b,c),p=[this.listeningTo,this.listeningToOnce],q=[],i=0,l=p.length;l>i;i++)e=p[i],e&&(d=e.indexOf(a),-1!==d?q.push(e.splice(d,1)):q.push(void 0));return q}},d.prototype.unbind=function(a,b){var c,d,e,f,g;if(0===arguments.length)return this.trigger("unbind");if(a){for(f=a.split(" "),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.trigger("unbind",c,b));return g}},d}(f),e.prototype.on=e.prototype.bind,e.prototype.off=e.prototype.unbind,b=function(b){function e(b){this.release=q(this.release,this);var c,d,f,g,h;this.options=b,h=this.options;for(d in h)g=h[d],this[d]=g;for(this.el||(this.el=document.createElement(this.tag)),this.el=a(this.el),this.$el=this.el,this.className&&this.el.addClass(this.className),this.attributes&&this.el.attr(this.attributes),this.events||(this.events=this.constructor.events),this.elements||(this.elements=this.constructor.elements),c=this;f=c.constructor.__super__;)f.events&&(this.events=a.extend({},f.events,this.events)),f.elements&&(this.elements=a.extend({},f.elements,this.elements)),c=f;this.events&&this.delegateEvents(this.events),this.elements&&this.refreshElements(),e.__super__.constructor.apply(this,arguments)}return p(e,b),e.include(c),e.include(d),e.prototype.eventSplitter=/^(\S+)\s*(.*)$/,e.prototype.tag="div",e.prototype.release=function(){return this.trigger("release",this),this.el.remove(),this.unbind(),this.stopListening()},e.prototype.$=function(b){return a(b,this.el)},e.prototype.delegateEvents=function(a){var b,c,d,e,f,g,h=this;g=[];for(c in a){if(e=a[c],"function"==typeof e)e=function(a){return function(){return a.apply(h,arguments),!0}}(e);else{if(!this[e])throw new Error(""+e+" doesn't exist");e=function(a){return function(){return h[a].apply(h,arguments),!0}}(e)}d=c.match(this.eventSplitter),b=d[1],f=d[2],""===f?g.push(this.el.bind(b,e)):g.push(this.el.delegate(f,b,e))}return g},e.prototype.refreshElements=function(){var a,b,c,d;c=this.elements,d=[];for(a in c)b=c[a],d.push(this[b]=this.$(a));return d},e.prototype.delay=function(a,b){return setTimeout(this.proxy(a),b||0)},e.prototype.html=function(a){return this.el.html(a.el||a),this.refreshElements(),this.el},e.prototype.append=function(){var a,b,c;return b=1<=arguments.length?m.call(arguments,0):[],b=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).append.apply(c,b),this.refreshElements(),this.el},e.prototype.appendTo=function(a){return this.el.appendTo(a.el||a),this.refreshElements(),this.el},e.prototype.prepend=function(){var a,b,c;return b=1<=arguments.length?m.call(arguments,0):[],b=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(a.el||a);return e}(),(c=this.el).prepend.apply(c,b),this.refreshElements(),this.el},e.prototype.replace=function(b){var c,d;return d=[this.el,a(b.el||b)],c=d[0],this.el=d[1],c.replaceWith(this.el),this.delegateEvents(this.events),this.refreshElements(),this.el},e}(f),a=("undefined"!=typeof window&&null!==window?window.jQuery:void 0)||("undefined"!=typeof window&&null!==window?window.Zepto:void 0)||function(a){return a},h=Object.create||function(a){var b;return b=function(){},b.prototype=a,new b},i=function(a){return"[object Array]"===Object.prototype.toString.call(a)},j=function(a){var b;if(!a)return!0;for(b in a)return!1;return!0},k=function(a){return Array.prototype.slice.call(a,0)},g=this.Spine={},"undefined"!=typeof module&&null!==module&&(module.exports=g),g.version="1.1.0",g.isArray=i,g.isBlank=j,g.$=a,g.Events=c,g.Log=d,g.Module=f,g.Controller=b,g.Model=e,f.extend.call(g,c),f.create=f.sub=b.create=b.sub=e.sub=function(a,b){var c,d;return c=function(a){function b(){return d=b.__super__.constructor.apply(this,arguments)}return p(b,a),b}(this),a&&c.include(a),b&&c.extend(b),"function"==typeof c.unbind&&c.unbind(),c},e.setup=function(a,b){var c,d;return null==b&&(b=[]),c=function(a){function b(){return d=b.__super__.constructor.apply(this,arguments)}return p(b,a),b}(this),c.configure.apply(c,[a].concat(m.call(b))),c},g.Class=f}.call(this),define("app/battle/battleGroup",["./effect","./viewData"],function(a,b,c){var d=a("./effect"),e=d.fighterBgEffect,f=a("./viewData"),g=f.fighterStatus,h=f.battleGroup,i=function(a){this.initialize(a)},j=i.prototype=new createjs.Container;j.Container_initialize=j.initialize,j.initialize=function(a){this.Container_initialize(),this.viewData=a,this.x=a.battleGroup.x,this.y=a.battleGroup.y,this.readyGroup=new createjs.Container,this.waitGroup=(new createjs.Container).set(a.waitGroup),this.fightGroup=(new createjs.Container).set(a.fightGroup),this.runeGroup=(new createjs.Container).set(a.runeGroup),this.diedFighter=(new createjs.Container).set(a.diedFighter),this.addChild(this.waitGroup,this.fightGroup,this.runeGroup,this.diedFighter)},j.entranceAnimation=function(a,b){a.status==g.FIGHT?a.set({x:b}):a.status===g.WAIT&&createjs.Tween.get(a).to({x:b},h.speed.fast)},j.addFighter=function(a){var b=this;a.addEventListener("click",this.proxy(this.fighterHandler)),this.toggleWaitStatus(a),this.waitGroup.children.forEach(function(a){0===a.model.currWaitTime&&(a.toggleStatus(g.READY_BEFORE),b.addReadyEffect(a))})},j.addReadyEffect=function(){},j.addRole=function(a){this.roleGroup=a,this.roleGroup.initViewData(this.viewData),this.addChild(this.roleGroup)},j.addRune=function(a){this.setRuneXY(a),this.runeGroup.addChild(a)},j.fighterHandler=function(a){var b=a.target;if(b.status===g.SHOW){var c=this.getStage();b.x=b.oldX,b.y=b.oldY,b.toggleStatus(b.oldStatus),b.oldParent.addChild(b),c.removeChild(b),createjs.Ticker.setPaused(!1)}else if(b.status===g.READY_BEFORE){b.toggleStatus(g.READY);var d=b.clone(!0);d.addEventListener("click",this.proxy(this.fighterHandler)),d.originalFighter=b,d.status=g.READY,this.readyGroup.addChild(d),this.waitGroup.addChild(d),this.toggleFightStatus(b)}else if(b.status===g.READY){if(!b.originalFighter)return;this.fightGroup.removeChild(b.originalFighter),b.originalFighter.x=b.x,b.originalFighter.y=b.y,b.originalFighter.toggleStatus(g.WAIT),b.originalFighter.toggleStatus(g.READY_BEFORE),this.waitGroup.addChild(b.originalFighter),this.readyGroup.removeChild(b),this.waitGroup.removeChild(b)}else if(b.status!==g.SHOW){if(b.showSkill===!0)return;var c=this.getStage();b.oldParent=b.parent,b.oldStatus=b.status,b.oldX=b.x,b.oldY=b.y,b.toggleStatus(g.SHOW),c.addChild(b),createjs.Ticker.setPaused(!0),c.update()}},j.toggleFightStatus=function(a){a.toggleStatus(g.FIGHT),this.setFighterXY(this.fightGroup,a),this.fightGroup.addChild(a)},j.toggleWaitStatus=function(a){a.toggleStatus(g.WAIT),this.setFighterXY(this.waitGroup,a),this.waitGroup.addChild(a)},j.actionsAttack=function(a,b,c){var d,f,g=this,h=b.shift(),i=h.targets;e.appendToFighter(a),createjs.Tween.get(a).to({y:a.y+15},100).to({y:a.y},100).call(function(){e.removeFromFighter(a),d=0===b.length?function(){c()}:function(){g.actionsAttack(a,b,c)};for(var j=i.length-1;j>=0;j--)f=g.battleView.getActionTarget(i[j],h.skill),0===j?f.hit(d):f.hit()})},j.fighterAttack=function(a,b,c){var d=this,e=function(c){d.actionsAttack(a,b,c)},f=h.showNums,g=this.fightGroup.getChildIndex(a);if(g>=f&&this.lastMoveIndex!==g){c=this.proxy(this.backFighter,a,c);var i,j=g-f;this.fightGroup.getChildAt(j).visible=0,i=d.forwardFightGroupXY(),createjs.Tween.get(this.fightGroup).to({x:i},h.speed.fast).call(e,[c]),this.lastMoveIndex=g}else e(c)},j.launchRune=function(){},j.backFighter=function(a,b){var c=h.showNums,d=this,e=this.fightGroup.getChildIndex(a);if(void 0===this.fightGroup.getChildAt(e+1)&&e>=c){var f,g=e-c,i=function(){0>g||(d.fightGroup.getChildAt(g).visible=1,f=d.backwardFightGroupXY(),c>g?createjs.Tween.get(d.fightGroup).to({x:f},h.speed.fast).call(b):createjs.Tween.get(d.fightGroup).to({x:f},h.speed.fast).call(i),g--)};i()}else b()},c.exports=i}),define("app/battle/battleModel",["./viewData"],function(a,b,c){var d=a("./viewData"),e=window.APP,f=d.battleGroup,g=Spine.Module.sub(Spine.Events),h=g.prototype;h.currentFighter=null,h.turnIndex=0,h.actionIndexInTurn=null,h.actionList=[],h.roles={},h.runes={},h.waits={},h.actions={},h.error=null,h.EVENT_ERROR="error",h.EVENT_TURN_READY="turnReady",h.EVENT_FIGHTER_ACTION_START="ighterActionStart",h.EVENT_TURN_FIGHT_DONE="turnFightDone",h.roleHandle=function(a){this.roles.player=a.p,this.roles.player.currentFighter=f.fighters.player,this.runes.player=a.p.runes,this.roles.enemy=a.e,this.roles.enemy.currentFighter=f.fighters.enemy,this.runes.enemy=a.e.runes},h.waitsHandle=function(a){this.waits.player=a.p,this.waits.enemy=a.e},h.actionsHandle=function(a){this.actions=a},h._nextTurn=function(){this.turnIndex++,this.actionIndexInTurn=0,this.actionList=[],this.trigger(this.EVENT_TURN_READY)},h.startFight=function(a){var b=this.resultHandle(a.result);b!==!1&&(this.roleHandle(a.roles),this.waitsHandle(a.waits),this.actionsHandle(a.actionList),this.turnIndex=0,this._nextTurn())},h.roundFight=function(a){this.resultHandle(a.result),result!==!1&&(this.waitsHandle(a.waits),this.actionsHandle(a.actionList),this._nextTurn())},h.resultHandle=function(a){if("undefined"!=typeof a.noPhysical&&a.noPhysical===!0&&(this.error=""),"undefined"!=typeof a.fightEnd,"undefined"!=typeof a.sente&&a.sente){var b,c=f.fighters;for(b in c)c[b]===a.sente&&(this.currentFighter=b,this.sente=a.sente)}return null!==this.error?(this.trigger(this.EVENT_ERROR),!1):!0},h.fightActionDone=function(){if(this.actions.length>0){var a,b=f.fighters;for(a in b)if(a!==this.currentFighter){this.currentFighter=a;break}this._nextTurn()}else console.log("")},h.startFightReq=function(a){var b=this;$.ajax({type:"GET",headers:{"If-Modified-Since":"0"},url:"http://192.168.1.88:88/cardApp/assets/testdata/fightStart.json",beforeSend:e.ajaxLoading,success:function(c){e.ajaxLoadingEnd(),b.startFight(c),null===b.error&&a()},error:function(){e.ajaxLoadingEnd(),b.error="",b.trigger(b.EVENT_ERROR)}})},h.roundFightReq=function(a){var b=this;$.ajax({type:"GET",url:"http://192.168.1.88:88/cardApp/assets/testdata/fightRound.json",beforeSend:e.ajaxLoading,success:function(c){e.ajaxLoadingEnd(),b.roundFight(c),null===b.error&&a()},error:function(){e.ajaxLoadingEnd(),b.error="",b.trigger(b.EVENT_ERROR)}})},h.fighterActionStart=function(){return this.actionIndexInTurn===this.actionList.length||null===this.actionIndexInTurn?(this.trigger(this.EVENT_TURN_FIGHT_DONE),void 0):(this.currentAction=this.actionList[this.actionIndexInTurn],this.trigger(this.EVENT_FIGHTER_ACTION_START),void 0)};var i=new g;c.exports=i}),define("app/battle/battleView",["../mvc/createjs.extend","../config/consts","../utils/mobile","./playerGroup","./battleGroup","./effect","./viewData","./enemyGroup","./fighter","../utils/utils","./role","./rune","./skill","../utils/dataApi","./turnPointer"],function(a,b,c){function d(){alert("")}function e(){alert("")}a("../mvc/createjs.extend");var f=a("../config/consts").pageSize,g=a("../utils/mobile"),h=a("./playerGroup"),i=a("./enemyGroup"),j=a("./fighter"),k=a("./role"),l=a("./rune"),m=a("./skill"),n=a("./viewData"),o=a("./turnPointer"),p=n.battleGroup;n.playerGroup,n.enemyGroup;var q=n.sourceRect;a("../utils/utils");var r=window.APP.preload,s=Spine.Module.sub(Spine.Events),t=s.prototype;t.stage=null,t.playerTeam={},t.enemyTeam={},t.playerRole={},t.enemyRole={},t.playerRunes={},t.enemyRunes={},t.EVENT_WAIT_FIGHTER="waitFighter",t.EVENT_TURN_READY_DONE="turnReadyDone",t.EVENT_TURN_FIGHT="turnFight",t.EVENT_ACTION_DONE="actionDone",t.EVENT_TURN_FIGHT_DONE="turnFightDone",t.initialize=function(a){this.stage=new createjs.Stage(a),createjs.Touch.isSupported()&&createjs.Touch.enable(this.stage,!0,!1),this.stage.mouseMoveOutside=!0,this.stage.enableMouseOver(10),this.stage.scaleX=g.canvasRadio.width*f.WIDTH/p.stage.width,this.stage.scaleY=g.canvasRadio.height*f.HEIGHT/p.stage.height,createjs.Ticker.setFPS(20),createjs.Ticker.useRAF=!0,createjs.Ticker.addEventListener("tick",this.proxy(this.handleTick)),this.initStage()},t.handleTick=function(){this.stage.update()},t.pauseGame=function(){createjs.Ticker.setPaused(!0),this.stage.update()},t.continueGame=function(){createjs.Ticker.addEventListener("tick",this.proxy(this.handleTick))},t.endGame=function(){createjs.Ticker.removeEventListener("tick")},t.initStage=function(){this.drawBackground(),this.drawButton(),this.playerGroup=h,this.enemyGroup=i,this.playerGroup.battleView=this.enemyGroup.battleView=this,this.stage.addChild(this.playerGroup,this.enemyGroup),this.stage.addChild(o)},t.drawBackground=function(){var a=new createjs.Bitmap(r.getResult("battleBg"));this.stage.addChild(a)},t.drawButton=function(){this.autoButton=new createjs.Bitmap(r.getResult("fightButton")).set({x:p.autoButton.x,y:p.autoButton.y,cursor:"pointer"}),this.autoButton.sourceRect=q.autoNormalRect,this.autoButton.addEventListener("click",d),this.handButton=new createjs.Bitmap(r.getResult("fightButton")).set({x:p.handButton.x,y:p.handButton.y,cursor:"pointer"}),this.handButton.sourceRect=q.turnNormalRect,this.handButton.addEventListener("click",e),this.stage.addChild(this.autoButton,this.handButton)},t.initRole=function(a){this.playerRole=new k(a.player),this.enemyRole=new k(a.enemy),this.playerGroup.addRole(this.playerRole),this.enemyGroup.addRole(this.enemyRole)},t.initRune=function(a){var b,c=this;a.player.forEach(function(a){b=new l(a),c.playerGroup.addRune(b),c.playerRunes[a]=b}),a.enemy.forEach(function(a){b=new l(a),c.enemyGroup.addRune(b),c.enemyRunes[a]=b})},t.showTurn=function(a,b){o.setTurn(a,b)},t.showWaitFighter=function(a,b){var c=this,d=this.currentFighterTeam=this[b+"Team"],e=this.currentBattleGroup=this[b+"Group"];if(this.currentRunes=this[b+"Runes"],this.currentRole=this[b+"Role"],void 0===a||this.isFullWaitFighter(b))this.trigger(this.EVENT_TURN_READY_DONE);else{var f=function(){var b=new j(a);d[a.id]=b,e.addFighter(b),c.trigger(c.EVENT_TURN_READY_DONE)};r.loadCard(a.entityId,f)}},t.isFullWaitFighter=function(a){var b=this[a+"Group"];return b.waitGroup.getNumChildren()>4?!0:!1},t.addAttackEffect=function(){},t.turnReadyDone=function(a){var b;if(a===!1);else if(a===!0)for(b in this.currentFighterTeam)0===this.currentFighterTeam[b].model.currWaitTime&&this.currentBattleGroup.toggleFightStatus(this.currentFighterTeam[b]);for(b in this.playerTeam)this.playerTeam[b].costWaitTime();for(b in this.enemyTeam)this.enemyTeam[b].costWaitTime();this.trigger(this.EVENT_TURN_FIGHT)},t.getActionTarget=function(a,b){var c;return 0===a.type?this.currentRole===this.playerRole?c=this.enemyRole:this.currentRole===this.enemyRole&&(c=this.playerRole):1===a.type&&(a.id in this.enemyTeam?c=this.enemyTeam[a.id]:a.id in this.playerTeam&&(c=this.playerTeam[a.id])),a.skill=new m(b),c.hitData=a,c},t.showActionStart=function(a){var b,c=this,d=a.actions,e=function(){c.currentBattleGroup.resetWaitFighter(),c.trigger(c.EVENT_ACTION_DONE)};createjs.Tween.get(this.stage).wait(p.speed.normal).call(function(){0===a.type?(b=c.currentRunes[a.id],c.currentBattleGroup.launchRune(b,d,e)):1===a.type&&(b=c.currentFighterTeam[a.id],c.currentBattleGroup.fighterAttack(b,d,e))})};var u=new s;c.exports=u}),define("app/battle/effect",[],function(a,b){function c(){var a=new createjs.Bitmap(d.getResult("fighterBg"));return a}var d=window.APP.preload,e=new createjs.Bitmap(d.getResult("fighterBg"));e.visible=!1,e.appendToFighter=function(a){e.set({x:-15,y:-15}),e.visible=!0,a.addChildAt(e)},e.removeFromFighter=function(a){a.removeChild(e),e.visible=!1},b.fighterBgEffect=e,b.FighterReadyEffect=c}),define("app/battle/enemyGroup",["./battleGroup","./effect","./viewData"],function(a,b,c){var d=a("./battleGroup"),e=a("./viewData"),f=e.battleGroup,g=e.enemyGroup,h=new d(g);h.setFighterXY=function(a,b){var c=g.fighterXY.x,d=a.getNumChildren(),e=f.fighter.width;c=c-d*e-f.margin.f2f*d,b.set({x:c+e,y:g.fighterXY.y}),h.entranceAnimation(b,c)},h.setRuneXY=function(a){var b=g.runeXY.x,c=this.runeGroup.getNumChildren(),d=f.rune.width;b=b-c*d-f.margin.r2r*c,a.set({x:b,y:g.runeXY.y})},h.forwardFightGroupXY=function(){return this.fightGroup.x+f.fighter.width+f.margin.f2f},h.backwardFightGroupXY=function(){return this.fightGroup.x-f.fighter.width-f.margin.f2f},h.resetWaitFighter=function(){var a=g.fighterXY.x;this.waitGroup.children.forEach(function(b){b.x=a,a=a-f.fighter.width-f.margin.f2f})},c.exports=h}),define("app/battle/fighter",["../utils/utils","./viewData"],function(a,b,c){a("../utils/utils");var d=a("./viewData"),e=d.fighterStatus;d.sourceRect;var f=d.battleGroup,g=window.APP.preload,h=f.font.normal,i=f.font.large,j=function(a,b){this.initialize(a),"undefied"!=typeof b&&this.toggleStatus(b)},k=j.prototype=new createjs.Container;k.Container_initialize=k.initialize,k.status=null,k.initialize=function(a){this.Container_initialize(),a&&(this.model=a)},k.waitStatus=function(){if(this.removeAllChildren(),!this.waitFighterContainer){this.waitFighterContainer=new createjs.Container;var a=g.getResult("card-small-"+this.model.entityId);this.waitFighterFigure=new createjs.Bitmap(a),this.waitFighterFigure.cache(0,0,a.width,a.height),this.waitFrame=new createjs.Bitmap(g.getResult("cardFrame-wait")),this.atk=new createjs.Text(this.model.atk,h,"#fff"),this.hp=new createjs.Text(this.model.hp,h,"#fff"),this.currWaitTime=new createjs.Text(this.model.currWaitTime,h,"#fff"),this.waitFighterContainer.scaleX=.98,this.waitFighterContainer.scaleY=.92,this.waitFighterContainer.addChild(this.waitFighterFigure),this.waitFighterContainer.addChild(this.waitFrame),this.waitFighterContainer.addChild(this.currWaitTime)}this.currWaitTime.set({x:8,y:84}),this.atk.set({x:40,y:77}),this.hp.set({x:40,y:97}),this.waitFighterFigure.filters=[],this.waitFighterContainer.addChild(this.atk),this.waitFighterContainer.addChild(this.hp),this.addChild(this.waitFighterContainer)},k.fightStatus=function(){this.removeAllChildren(),this.fightFighterContainer||(this.fightFighterContainer=new createjs.Container,this.fightFighterFigure=new createjs.Bitmap(g.getResult("card-normal-"+this.model.entityId)),this.fightFrame=new createjs.Bitmap(g.getResult("cardFrame-normal-"+this.model.country)),this.currHp=new createjs.Text(this.model.currHp,h,"#fff"),this.currHp.addEventListener("tick",function(a){a.target.text=Math.ceil(a.target.text)}),this.currAtk=new createjs.Text(this.model.currAtk,h,"#fff"),this.level||(this.level=new createjs.Text(this.model.level,h,"#fff")),this.name||(this.name=new createjs.Text(this.model.name,h,"#fff")),this.fightFighterContainer.scaleX=.99,this.fightFighterContainer.scaleY=.95,this.fightFighterContainer.addChild(this.fightFighterFigure),this.fightFighterContainer.addChild(this.fightFrame),this.fightFighterContainer.addChild(this.currAtk),this.fightFighterContainer.addChild(this.currHp)),this.name.set({x:50,y:0,font:h}),this.level.set({x:65,y:20}),this.currAtk.set({x:10,y:127}),this.currHp.set({x:40,y:152}),this.fightFighterContainer.addChild(this.name),this.fightFighterContainer.addChild(this.level),this.addChild(this.fightFighterContainer)
},k.showStatus=function(){this.removeAllChildren(),this.showFighterContainer||(this.showFighterContainer=new createjs.Container,this.showBg=new createjs.Shape,this.showBg.graphics.beginFill("#000").drawRect(0,0,f.stage.width,f.stage.height),this.showFighterFigure=new createjs.Bitmap(g.getResult("card-large-"+this.model.entityId)),this.showFrame=new createjs.Bitmap(g.getResult("cardFrame-large-"+this.model.country)),this.fightskill=new createjs.Text(this.model.fightskill,i,"#fff").set({x:0,y:560}),this.waitTime=new createjs.Text(this.model.waitTime,h,"#fff"),this.cost=new createjs.Text(this.model.cost,i,"#fff").set({x:250,y:45}),this.star=new createjs.Bitmap(g.getResult("star-"+this.model.star)).set({x:70,y:32}),this.level||(this.level=new createjs.Text(this.model.level,h,"#fff")),this.name||(this.name=new createjs.Text(this.model.name,h,"#fff")),this.showFighterContainer.addChild(this.showBg),this.showFighterContainer.addChild(this.showFighterFigure),this.showFighterContainer.addChild(this.showFrame),this.showFighterContainer.addChild(this.fightskill),this.showFighterContainer.addChild(this.waitTime),this.showFighterContainer.addChild(this.cost),this.showFighterContainer.addChild(this.star)),this.set({x:0,y:0}),this.name.set({x:116,y:0}),this.name.font=i,this.waitTime.set({x:13,y:355}),this.waitTime.font=i,this.level.set({x:180,y:8}),this.atk.set({x:58,y:419}),this.hp.set({x:157,y:419}),this.showFighterContainer.addChild(this.name),this.showFighterContainer.addChild(this.level),this.showFighterContainer.addChild(this.atk),this.showFighterContainer.addChild(this.hp),this.addChild(this.showFighterContainer)},k.readyStatus=function(){this.setDiedFighterFighre()},k.diedStatus=function(){this.removeChild(this.fighterData),this.setDiedFighterFighre()},k.setDiedFighterFighre=function(){var a=new createjs.ColorMatrixFilter([.33,.33,.33,0,0,.33,.33,.33,0,0,.33,.33,.33,0,0,0,0,0,1,0]);this.waitFighterFigure.filters=[a]},k.hit=function(a){var b=this.hitData,c=b.skill;this.addChild(c);var d=this,e=b.hurt+this.model.currHp;this.model.currHp=0>=e?0:e,c.addEventListener("animationend",function(){4!==c.type&&createjs.Tween.get(d).to({x:d.x-10},f.speed.fast).to({x:d.x+10},f.speed.fast).to({x:d.x},f.speed.fast),createjs.Tween.get(d.currHp).to({text:d.model.currHp},f.speed.fast),0===b.status&&d.trigger(this.EVENT_DIED,d),void 0!==a&&a(),setTimeout(function(){d.removeChild(c),d.showSkill=!1,d.hitData=null},f.speed.slow)}),this.showSkill=!0,c.gotoAndPlay("all")},k.toggleStatus=function(a){switch(a){case e.WAIT:this.waitStatus();break;case e.FIGHT:this.fightStatus();break;case e.READY:this.readyStatus();break;case e.DIED:this.diedStatus();break;case e.SHOW:this.showStatus()}this.status=a},k.costWaitTime=function(){this.model.currWaitTime-=1,this.currWaitTime.text=this.model.currWaitTime},c.exports=j}),define("app/battle/playerGroup",["./battleGroup","./effect","./viewData"],function(a,b,c){var d=a("./battleGroup"),e=a("./viewData"),f=e.battleGroup,g=e.playerGroup,h=new d(g);h.setFighterXY=function(a,b){var c=g.fighterXY.x,d=a.getNumChildren(),e=f.fighter.width;c=c+d*e+f.margin.f2f*d,b.set({x:c-e,y:g.fighterXY.y}),h.entranceAnimation(b,c)},h.setRuneXY=function(a){var b=g.runeXY.x,c=this.runeGroup.getNumChildren(),d=f.rune.width;b=b+c*d+f.margin.r2r*c,a.set({x:b,y:g.runeXY.y})},h.forwardFightGroupXY=function(){return this.fightGroup.x-f.fighter.width-f.margin.f2f},h.backwardFightGroupXY=function(){return this.fightGroup.x+f.fighter.width+f.margin.f2f},h.resetWaitFighter=function(){var a=g.fighterXY.x;this.waitGroup.children.forEach(function(b){b.x=a,a=a+f.fighter.width+f.margin.f2f})},c.exports=h}),define("app/battle/role",["../utils/utils","./viewData","../config/consts"],function(a,b,c){var d=a("../utils/utils"),e=a("./viewData"),f=e.battleGroup,g=e.sourceRect,h=f.font.normal,i=a("../config/consts").roleSex,j=window.APP.preload,k=function(a){this.initialize(a)},l=k.prototype=new createjs.Container;l.Container_initialize=l.initialize,l.initialize=function(a){this.Container_initialize(),a&&(this.model=a,this.model.currHp=this.model.hp,this.hpTextShapeRadio=f.hpShape.width/this.model.hp,this.addAvatar(),this.name=new createjs.Text(this.model.name,h,"#fff"),this.addChild(this.name),this.addHp())},l.initViewData=function(a){this.set({x:a.roleGroup.x,y:a.roleGroup.y}),this.name.set({x:f.name.x,y:f.name.y}),this.hpText.set({x:f.hpText.x,y:f.hpText.y}),this.hpShape.set({x:f.hpShape.x,y:f.hpShape.y}),a.hpShape.turn===!0&&(this.hpShape.regX=f.hpShape.width,this.hpShape.scaleX=-1)},l.addAvatar=function(){var a=this;if(this.model.currentFighter===f.fighters.player||this.model.avatar)this.avatar=new createjs.Bitmap(j.getResult("avatar")).set({x:f.avatar.x,y:f.avatar.y}),this.model.avatar===i.MAN?this.avatar.sourceRect=g.manAvatarRect:this.model.avatar===i.WOMAN&&(this.avatar.sourceRect=g.womanAvatarRect),this.avatar.scaleX=.92,this.avatar.scaleY=.9,this.addChildAt(this.avatar,0);else if(this.model.currentFighter===f.fighters.enemy){var b=function(b){a.avatar=new createjs.Bitmap(b).set({x:f.avatar.x,y:f.avatar.y}),a.avatar.scaleX=.92,a.avatar.scaleY=.9,a.addChildAt(a.avatar,0)},c="images/card/small/fA"+this.model.entityId+".png";d.loadImage(c,b)}},l.addHp=function(){this.hpShape=new createjs.Shape,this.drawHpShape(f.hpShape.width),this.hpText=new createjs.Text(this.model.hp+"/"+this.model.hp,h,"#fff"),this.addChild(this.hpShape,this.hpText)},l.hit=function(a){var b=this.hitData,c=b.skill;c.scaleX=.9,c.scaleY=.6,this.addChild(c);var d=this;c.addEventListener("animationend",function(){d.removeChild(c),void 0!==a&&a()}),c.gotoAndPlay("all");var e=b.hurt+this.model.currHp;this.model.currHp=0>=e?0:e,this.hpText.text=this.model.currHp+"/"+this.model.hp;var f=this.hpTextShapeRadio*this.model.currHp;this.drawHpShape(f)},l.drawHpShape=function(a){this.hpShape.graphics.clear().beginFill("#990000").drawRect(0,0,Math.floor(a),f.hpShape.height)},c.exports=k}),define("app/battle/rune",[],function(a,b,c){var d=window.APP.preload,e=function(a){this.initialize(a)},f=e.prototype=new createjs.Container;f.Container_initialize=f.initialize,f.initialize=function(a){this.Container_initialize(),this.model=a;var b=new createjs.Bitmap(d.getResult("rune-"+a));b.scaleX=.5,b.scaleY=.5,this.addChild(b)},c.exports=e}),define("app/battle/skill",["../utils/dataApi"],function(a,b,c){var d=window.APP.preload,e=a("../utils/dataApi"),f=function(a){this.initialize(a)},g=f.prototype=new createjs.BitmapAnimation;g.BitmapAnimation_initialize=g.initialize,g.initialize=function(a){this.initData(a);var b=d.getResult("skill-sprite-"+a);b.images=[d.getResult("skill-"+a)];var c=new createjs.SpriteSheet(b);this.BitmapAnimation_initialize(c)},g.initData=function(a){var b=e.fightskill.findById(a);this.type=b.type},c.exports=f}),define("app/battle/turnPointer",["./viewData"],function(a,b,c){var d=a("./viewData"),e=d.battleGroup,f=window.APP.preload,g=(new createjs.Container).set({x:571,y:400}),h=new createjs.Bitmap(f.getResult("turn-pointerBg")).set({x:19,y:0}),i=new createjs.Bitmap(f.getResult("turn-pointer")).set({x:69,y:51,regX:69,regY:17}),j=new createjs.Bitmap(f.getResult("turn-pointerInfo")).set({x:39,y:14}),k=new createjs.Text("","bold 26px Arial","#fff").set({x:50,y:34});g.addChild(h,i,j,k),g.setTurn=function(a,b){k.text=a,e.fighters[b]===e.fighters.player?createjs.Tween.get(i).to({rotation:-45},e.speed.normal):e.fighters[b]===e.fighters.enemy&&createjs.Tween.get(i).to({rotation:45},e.speed.normal)},c.exports=g}),define("app/battle/viewData",[],function(a,b){b.battleGroup={stage:{width:640,height:960},speed:{fast:80,normal:150,slow:300},font:{large:"20px Microsoft YaHei",normal:"14px Microsoft YaHei",small:"12px Microsoft YaHei"},fighters:{player:0,enemy:1},fighter:{width:118},avatar:{x:0,y:0},hpShape:{x:0,y:94,width:110,height:12},hpText:{x:20,y:89},name:{x:45,y:-10},rune:{width:55},autoButton:{x:449,y:649},handButton:{x:257,y:649},turnButton:{x:257,y:649},margin:{f2f:8,r2r:15},showNums:5},b.playerGroup={battleGroup:{x:0,y:457},waitGroup:{x:0,y:391},roleGroup:{x:18,y:277},hpShape:{turn:!1},runeGroup:{x:140,y:321},fightGroup:{x:0,y:0},diedFighter:{x:504,y:274},fighterXY:{x:9,y:0},runeXY:{x:0,y:0}},b.enemyGroup={battleGroup:{x:0,y:0},waitGroup:{x:0,y:0},roleGroup:{x:514,y:122},hpShape:{turn:!0},runeGroup:{x:0,y:125},fightGroup:{x:0,y:270},diedFighter:{x:0,y:10},fighterXY:{x:513,y:0},runeXY:{x:445,y:0}},b.fighterStatus={FIGHT:"fight",WAIT:"wait",READY_BEFORE:"readyBefore",READY:"ready",DIED:"died",SHOW:"show"},b.skillType={},b.sourceRect={handNormalRect:new createjs.Rectangle(0,0,183,56),handCanelRect:new createjs.Rectangle(188,0,183,56),autoNormalRect:new createjs.Rectangle(0,61,183,56),autoCancelRect:new createjs.Rectangle(188,61,182,56),turnNormalRect:new createjs.Rectangle(0,122,182,56),turnCanelRect:new createjs.Rectangle(187,122,182,56),womanAvatarRect:new createjs.Rectangle(0,0,116,116),manAvatarRect:new createjs.Rectangle(121,0,116,116)}}),define("app/config/consts",[],function(a,b,c){c.exports={entityType:{PLAYER:"player",FIGHTER:"fighter",EQUIPMENT:"equipment",ITEM:"item"},pageSize:{WIDTH:640,HEIGHT:960,DPR:2},roleSex:{MAN:1,WOMAN:2}}}),define("app/config/resource",[],function(a,b,c){c.exports={sounds:[{id:"bgSound",src:"sound/sound.ogg"}]}}),define("app/mvc/container",["./manager"],function(a,b,c){var d=({}.hasOwnProperty,function(a,b){function c(){this.constructor=a}for(var d in b)__hasProContainer.prototype.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a}),e=a("./manager");Spine.Controller.include({visible:!0,x:0,y:0,render:function(a){this.el.css({position:"absolute",left:x,top:y}),this.appendTo(a)}});var f=function(a){function b(){var a,c;b.__super__.constructor.apply(this,arguments),c=this.controllers;for(a in c)this.addChild(c[a])}return d(b,a),b.prototype.controllers={},b.prototype.render=function(){for(var a=this.children.slice(0),b=0,c=a.length;c>b;b++){var d=a[b];d.visible&&d.render(this)}return!0},b}(e);c.exports=f}),define("app/mvc/createjs.extend",[],function(){var a=createjs.Stage.prototype._handlePointerDown,b=createjs.Stage.prototype._handlePointerUp;navigator.userAgent.indexOf("Android")>-1&&(createjs.Stage.prototype._handlePointerDown=function(b,c,d){"undefined"!=typeof c.x&&(c.screenX=c.x,c.screenY=c.y,a.call(this,b,c,d))},createjs.Stage.prototype._handlePointerUp=function(a,c,d){"undefined"!=typeof c.x&&(c.screenX=c.x,c.screenY=c.y,b.call(this,a,c,d))}),createjs.DisplayObject.prototype.proxy=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}),define("app/mvc/manager",[],function(a,b,c){var d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};Spine.Controller.include({name:null,parent:null});var f=function(a){function b(){b.__super__.constructor.apply(this,arguments),this.children={}}return e(b,a),b.prototype.addChild=function(a,b){return null===b?b:("function"==typeof b&&(b=new b),b.parent&&b.parent.removeChild(a),b.name=a,b.parent=this,this.children[a]=b,b)},b.prototype.removeChild=function(a){var b=this.children[a];return b&&(b.parent=null),this.children[a]=null,!0},b.prototype.getChildAt=function(a){return this.children[a]},b.prototype.getNumChildren=function(){return this.children.length},b}(Spine.Controller);c.exports=f}),define("app/mvc/route",[],function(a,b,c){var d,e,f,g,h,i={}.hasOwnProperty,j=function(a,b){function c(){this.constructor=a}for(var d in b)i.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},k=[].slice;d=Spine.$,f=/^#*/,g=/:([\w\d]+)/g,h=/\*([\w\d]+)/g,e=/[-[\]{}()+?.,\\^$|#\s]/g,Spine.Route=function(a){function b(a,b){var c;if(this.path=a,this.callback=b,this.names=[],"string"==typeof a){for(g.lastIndex=0;null!==(c=g.exec(a));)this.names.push(c[1]);for(h.lastIndex=0;null!==(c=h.exec(a));)this.names.push(c[1]);a=a.replace(e,"\\$&").replace(g,"([^/]*)").replace(h,"(.*?)"),this.route=new RegExp("^"+a+"$")}else this.route=a}var c;return j(b,a),b.extend(Spine.Events),b.historySupport=null!=(null!=(c=window.history)?c.pushState:void 0),b.routes=[],b.options={trigger:!0,history:!1,shim:!1,replace:!1},b.add=function(a,b){var c,d,e;if("object"!=typeof a||a instanceof RegExp)return this.routes.push(new this(a,b));e=[];for(c in a)d=a[c],e.push(this.add(c,d));return e},b.setup=function(a){return null==a&&(a={}),this.options=d.extend({},this.options,a),this.options.history&&(this.history=this.historySupport&&this.options.history),this.options.shim?void 0:(this.history?d(window).bind("popstate",this.change):d(window).bind("hashchange",this.change),this.change())},b.unbind=function(){return this.options.shim?void 0:this.history?d(window).unbind("popstate",this.change):d(window).unbind("hashchange",this.change)},b.navigate=function(){var a,b,c,e;return a=1<=arguments.length?k.call(arguments,0):[],c={},b=a[a.length-1],"object"==typeof b?c=a.pop():"boolean"==typeof b&&(c.trigger=a.pop()),c=d.extend({},this.options,c),e=a.join("/").replace(f,""),this.path===e||(this.path=e,this.trigger("navigate",this.path),c.trigger&&this.matchRoute(this.path,c),c.shim)?void 0:this.history&&c.replace?history.replaceState({},document.title,this.path):this.history?history.pushState({},document.title,this.path):window.location.hash=this.path},b.getPath=function(){var a;return this.history?(a=window.location.pathname,"/"!==a.substr(0,1)&&(a="/"+a)):(a=window.location.hash,a=a.replace(f,"")),a},b.getHost=function(){return""+window.location.protocol+"//"+window.location.host},b.change=function(){var a;return a=this.getPath(),a!==this.path?(this.path=a,this.matchRoute(this.path)):void 0},b.matchRoute=function(a,b){var c,d,e,f;for(f=this.routes,d=0,e=f.length;e>d;d++)if(c=f[d],c.match(a,b))return this.trigger("change",c,a),c},b.prototype.match=function(a,b){var c,d,e,f,g,h;if(null==b&&(b={}),d=this.route.exec(a),!d)return!1;if(b.match=d,f=d.slice(1),this.names.length)for(c=g=0,h=f.length;h>g;c=++g)e=f[c],b[this.names[c]]=e;return this.callback.call(null,b)!==!1},b}(Spine.Module),Spine.Route.change=Spine.Route.proxy(Spine.Route.change),Spine.Controller.include({route:function(a,b){return Spine.Route.add(a,this.proxy(b))},routes:function(a){var b,c,d;d=[];for(b in a)c=a[b],d.push(this.route(b,c));return d},navigate:function(){return Spine.Route.navigate.apply(Spine.Route,arguments)}}),"undefined"!=typeof c&&null!==c&&(c.exports=Spine.Route)}),define("app/mvc/stack",["./manager","../ui/transitionManager","../ui/noTransition","../ui/jq.css3animate","../ui/slideTransition","../ui/slideDownTransition"],function(a,b,c){var d={}.hasOwnProperty,e=function(a,b){function c(){this.constructor=a}for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},f=([].slice,a("./manager")),g=a("../ui/transitionManager"),h=function(a){function b(){var a,c,d;this.oldController=null,b.__super__.constructor.apply(this,arguments),c=this.controllers;for(a in c)this.addChild(a,c[a]);d=this.routes;for(a in d)this.addRoute(a,d[a]);this.trigger("defaultRoute"),this["default"]&&this.navigate(this["default"],!0)}return e(b,a),b.prototype.controllers={},b.prototype.routes={},b.prototype.addRoute=function(a,b){var c,d,e,f=this;return d="function"==typeof b?b:function(a){e=f.oldController,c=f.getChildAt(b),f.oldController!==c&&(c.params=a,f.oldController=c,f.render(e,c))},this.route(a,d)},b.prototype.render=function(a,b){g.runTransition(a,b)},b.prototype.setOldController=function(a){this.oldController=a},b}(f);c.exports=h}),define("app/pages/gamePage",["../mvc/stack","../mvc/manager","../ui/transitionManager","../ui/noTransition","../ui/jq.css3animate","../ui/slideTransition","../ui/slideDownTransition","../panels/dungeonPanel","../panels/fightPanel","../panels/mainPanel","../panels/battlePanel","../config/consts","../utils/mobile","../battle/battleModel","../battle/viewData","../battle/battleView","../mvc/createjs.extend","../battle/playerGroup","../battle/battleGroup","../battle/effect","../battle/enemyGroup","../battle/fighter","../utils/utils","../battle/role","../battle/rune","../battle/skill","../utils/dataApi","../battle/turnPointer","../utils/utils.js"],function(a,b,c){var d=a("../mvc/stack"),e=d.sub({el:"#gamePage",transition:"down",routes:{"/panel/main":"main","/panel/dungeon":"dungeon","/panel/battle/:fb1/:fb2":"battle"},init:function(){var b=this;$("#navbar").delegate("a","click",function(){var c=$(this).attr("href");switch(c){case"#/panel/dungeon":var d=a("../panels/dungeonPanel");b.addChild("dungeon",d);break;case"#/panel/fight":var e=a("../panels/fightPanel");b.addChild("fight",e)}b.navigate(c)}),this.bind("contentLoad",this.proxy(this.enterBattle))},contentLoad:function(){var b=a("../panels/mainPanel");this.addChild("main",b),this.navigate("/panel/main",!0)},enterBattle:function(b){var b="/panel/battle/1/2",c=a("../panels/battlePanel");this.addChild("battle",c),this.navigate(b,!0)}}),f=new e;c.exports=f}),define("app/pages/loginPage",["../mvc/stack","../mvc/manager","../ui/transitionManager","../ui/noTransition","../ui/jq.css3animate","../ui/slideTransition","../ui/slideDownTransition","../panels/loginPanel","../panels/serverPanel"],function(a,b,c){var d=a("../mvc/stack"),e=d.sub({el:"#loginPage",routes:{"/panel/login":"login","/panel/server":"server"},init:function(){this.on("contentLoad",this.proxy(this.contentLoad))},contentLoad:function(){var b=a("../panels/loginPanel");this.addChild("login",b),this.navigate("/panel/login",!0)},enterServer:function(){var b=a("../panels/serverPanel");this.addChild("server",b),this.navigate("/panel/server",!0)}}),f=new e;c.exports=f}),define("app/panels/battlePanel",["../config/consts","../utils/mobile","../battle/battleModel","../battle/viewData","../battle/battleView","../mvc/createjs.extend","../battle/playerGroup","../battle/battleGroup","../battle/effect","../battle/enemyGroup","../battle/fighter","../utils/utils","../battle/role","../battle/rune","../battle/skill","../utils/dataApi","../battle/turnPointer","../utils/utils.js"],function(a,b,c){function d(){p.initRole(o.roles),p.initRune(o.runes)}function e(){var a=o.currentFighter;p.showTurn(o.turnIndex,a);var b=o.waits[a].shift();b=f(b,a),p.showWaitFighter(b,a)}function f(a,b){if(a){var c=r.character.findById(a.entityId),d=r.fightskill,e=a.level;a.currentFighter=t.fighters[b],a.cost=c.cost,a.star=c.star,a.name=c.name,a.atk=c.attack*e,a.hp=c.hp*e,a.waitTime=c.wait,a.country=c.country,a.currHp=a.hp,a.currAtk=c.attack,a.currWaitTime=a.waitTime;var f,g,h,i,j=c.skill;a.enableskill=[],a.fightskill="";for(h in j)g=j[h],f=d.findById(h),i=f.name+g.level,e<g.enableLevel?i=i+"("+g.enableLevel+")":a.enableskill.push(i),a.fightskill=a.fightskill+i+"\n"+f.desc+"\n\n";return a}}function g(){var a=h();a&&p.turnReadyDone(a)}function h(){var a=o.currentFighter;if(t.fighters[a]===t.fighters.enemy||o.isAutoFight===!0)return!0;if(t.fighters[a]===t.fighters.player){var b=!0,c=p.currentFighterTeam;for(var d in c)if(0===c[d].model.currWaitTime){b=!1;break}return b}return!1}function i(){var a,b,c,d=!1,e=p.currentFighterTeam,f=o.actions,g=f.length;if(0!==p.currentBattleGroup.fightGroup.children.length&&g>0)for(a=0;g>a&&(b=f.shift(),!("turnDone"in b&&b.turnDone));a++)c=b.id,c in e&&e[c].status===u.FIGHT&&(d=!0),o.actionList.push(b);d===!0?o.fighterActionStart():o.trigger(o.EVENT_TURN_FIGHT_DONE)}function j(){p.showActionStart(o.currentAction)}function k(){p.currentBattleGroup.lastMoveIndex=null,o.fightActionDone()}function l(){o.actionIndexInTurn++,o.fighterActionStart()}window.APP;var m=a("../config/consts").pageSize,n=a("../utils/mobile"),o=a("../battle/battleModel"),p=a("../battle/battleView"),q=a("../utils/utils"),r=a("../utils/dataApi"),s=a("../battle/viewData"),t=s.battleGroup,u=s.fighterStatus,v=Spine.Controller.sub({el:"#battlePanel",init:function(){var a;this.bind("contentLoad",d),o.bind(o.EVENT_ERROR,this.proxy(this.modelErrorHandler)),o.bind(o.EVENT_TURN_READY,e),o.bind(o.EVENT_FIGHTER_ACTION_START,j),o.bind(o.EVENT_TURN_FIGHT_DONE,k),p.bind(p.EVENT_TURN_READY_DONE,g),p.bind(p.EVENT_TURN_FIGHT,i),p.bind(p.EVENT_ACTION_DONE,l),p.bind(p.EVENT_TURN_FIGHT_DONE,k),a=q.createSketchpad(m.WIDTH*n.canvasRadio.width,m.HEIGHT*n.canvasRadio.height,document.getElementById("battleContainer")),p.initialize(a)},contentLoadBefore:function(a,b){o.startFightReq(a),this.oldController=b},modelErrorHandler:function(){alert(o.error),this.parent.oldController=this.oldController}}),w=new v;c.exports=w}),define("app/panels/dungeonPanel",[],function(a,b,c){var d=Spine.Controller.sub({el:"#dungeonPanel",transition:"slide",init:function(){var a=this;$("#enterFight").delegate("a","click",function(){var b=$(this).attr("href");a.parent.enterBattle(b)})}}),e=new d;c.exports=e}),define("app/panels/fightPanel",[],function(a,b,c){var d=Spine.Controller.sub({el:"#fightPanel",transition:"down",init:function(){}}),e=new d;c.exports=e}),define("app/panels/loginPanel",[],function(a,b,c){function d(){$("#g-doc").popup({title:"",message:": <input type='text' id='loginUser'><br>: <input type='text' id='loginPwd' style='webkit-text-security:disc'>",cancelCallback:function(){},doneText:"",doneCallback:f,cancelOnly:!1})}function e(){$("#g-doc").popup({title:"",message:": <input type='text' id='regUser'><br>: <input type='text' id='regPwd' style='webkit-text-security:disc'><br>: <input type='text' id='regPwd2' style='webkit-text-security:disc'>",cancelCallback:function(){},doneText:"",doneCallback:h,cancelOnly:!1})}function f(){if(!i){i=!0;var a=$("#loginUser").val().trim(),b=$("#loginPwd").val().trim();if($("#loginPwd").val(""),!a)return alert("!"),i=!1,void 0;if(!b)return alert("!"),i=!1,void 0;var c={user:{id:1},player:{areaId:"5"}};g(c)}}function g(a){var b=window.APP,c=a.user,d=a.player,e=d.areaId;c&&(b.uid=c.id),b.playerId=d.id,b.areaId=e,b.player=d,k.parent.enterServer()}function h(){var a=$("#regUser").val().trim(),b=$("#regPwd").val().trim(),c=$("#regPwd2").val().trim();return $("#loginPwd").val(""),a?b?b!==c?(alert("!"),i=!1,void 0):void 0:(alert("!"),i=!1,void 0):(alert("!"),i=!1,void 0)}var i=!1,j=Spine.Controller.sub({el:"#loginPanel",init:function(){d(),$("#loginButton").click(function(){d()}),$("#registerButton").click(function(){e()})}}),k=new j;c.exports=k}),define("app/panels/mainPanel",[],function(a,b,c){var d=Spine.Controller.sub({el:"#mainPanel",transition:"down",init:function(){this.bind("contentLoad",this.contentLoad)},contentLoad:function(){$(".slideLeft").listEffect({effect:"slideInLeft"}),$(".slideRight").listEffect({effect:"slideInRight"})},contentUnload:function(a){$(".slideLeft").listEffect({effect:"slideOutLeft",reverse:!0,out:!0}),$(".slideRight").listEffect({effect:"slideOutRight",reverse:!0,out:!0},a)}}),e=new d;c.exports=e}),define("app/panels/serverPanel",[],function(a,b,c){function d(){f.parent.parent.enterGame()}var e=Spine.Controller.sub({el:"#serverPanel",init:function(){$.selectBox.getOldSelects("selectServer"),$("#enterGameButton").click(function(){d()})}}),f=new e;c.exports=f}),define("app/ui/jq.css3animate",[],function(){var a=[],b=function(a){return a.jqmCSS3AnimateId||(a.jqmCSS3AnimateId=$.uuid()),a.jqmCSS3AnimateId},c=function(a){return"string"==typeof a||a instanceof String?document.getElementById(a):a},d=function(d,e){var f,g,i=c(d);return g=b(i),a[g]?(a[g].animate(e),f=a[g]):(f=h(i,e),a[g]=f),f};$.fn.css3Animate=function(a){!a.complete&&a.callback&&(a.complete=a.callback);var b=d(this[0],a);a.complete=null,a.sucess=null,a.failure=null;for(var c=1;c<this.length;c++)b.link(this[c],a);return b},$.css3AnimateQueue=function(){return new h.queue};var e=$.feat.cssTransformStart,f=$.feat.cssTransformEnd,g=$.feat.cssPrefix.replace(/-/g,"")+"TransitionEnd";g=$.os.fennec||""==$.feat.cssPrefix||$.os.ie?"transitionend":g,g=g.replace(g.charAt(0),g.charAt(0).toLowerCase());var h=function(){var b=function(c,d){if(!(this instanceof b))return new b(c,d);if(this.callbacksStack=[],this.activeEvent=null,this.countStack=0,this.isActive=!1,this.el=c,this.linkFinishedProxy_=$.proxy(this.linkFinished,this),this.el){this.animate(d);var e=this;$(this.el).bind("destroy",function(){var b=e.el.jqmCSS3AnimateId;e.callbacksStack=[],a[b]&&delete a[b]})}};return b.prototype={animate:function(a){if(this.isActive&&this.cancel(),this.isActive=!0,!a)return alert("Please provide configuration options for animation of "+this.el.id),void 0;var b=!!a.addClass;if(b)a.removeClass?$(this.el).replaceClass(a.removeClass,a.addClass):$(this.el).addClass(a.addClass);else{var c=numOnly(a.time);if(0==c&&(a.time=0),a.y||(a.y=0),a.x||(a.x=0),a.previous){var d=new $.getCssMatrix(this.el);a.y+=numOnly(d.f),a.x+=numOnly(d.e)}a.origin||(a.origin="0% 0%"),a.scale||(a.scale="1"),a.rotateY||(a.rotateY="0"),a.rotateX||(a.rotateX="0"),a.skewY||(a.skewY="0"),a.skewX||(a.skewX="0"),a.timingFunction||(a.timingFunction="linear"),("number"==typeof a.x||-1==a.x.indexOf("%")&&-1==a.x.toLowerCase().indexOf("px")&&-1==a.x.toLowerCase().indexOf("deg"))&&(a.x=parseInt(a.x)+"px"),("number"==typeof a.y||-1==a.y.indexOf("%")&&-1==a.y.toLowerCase().indexOf("px")&&-1==a.y.toLowerCase().indexOf("deg"))&&(a.y=parseInt(a.y)+"px");var h="translate"+e+a.x+","+a.y+f+" scale("+parseFloat(a.scale)+") rotate("+a.rotateX+")";$.os.opera||(h+=" rotateY("+a.rotateY+")"),h+=" skew("+a.skewX+","+a.skewY+")",this.el.style[$.feat.cssPrefix+"Transform"]=h,this.el.style[$.feat.cssPrefix+"BackfaceVisibility"]="hidden";var i=$.feat.cssPrefix+"Transform";if(void 0!==a.opacity&&(this.el.style.opacity=a.opacity,i+=", opacity"),a.width&&(this.el.style.width=a.width,i="all"),a.height&&(this.el.style.height=a.height,i="all"),this.el.style[$.feat.cssPrefix+"TransitionProperty"]="all",-1===(""+a.time).indexOf("s"))var j="ms",k=a.time+j;else if(-1!==a.time.indexOf("ms"))var j="ms",k=a.time;else var j="s",k=a.time+j;this.el.style[$.feat.cssPrefix+"TransitionDuration"]=k,this.el.style[$.feat.cssPrefix+"TransitionTimingFunction"]=a.timingFunction,this.el.style[$.feat.cssPrefix+"TransformOrigin"]=a.origin}this.callbacksStack.push({complete:a.complete,success:a.success,failure:a.failure}),this.countStack++;var l=this,m=window.getComputedStyle(this.el);if(b){var n=m[$.feat.cssPrefix+"TransitionDuration"],c=numOnly(n);a.time=c,-1!==n.indexOf("ms")?j="ms":(a.time*=1e3,j="s")}if(0==c||"ms"==j&&5>c||"none"==m.display)$.asap($.proxy(this.finishAnimation,this,[!1]));else{var l=this;this.activeEvent=function(a){clearTimeout(l.timeout),l.finishAnimation(a),l.el.removeEventListener(g,l.activeEvent,!1)},l.timeout=setTimeout(this.activeEvent,numOnly(a.time)+50),this.el.addEventListener(g,this.activeEvent,!1)}},addCallbackHook:function(a){return a&&this.callbacksStack.push(a),this.countStack++,this.linkFinishedProxy_},linkFinished:function(a){a?this.cancel():this.finishAnimation()},finishAnimation:function(a){a&&a.preventDefault(),this.isActive&&(this.countStack--,0==this.countStack&&this.fireCallbacks(!1))},fireCallbacks:function(a){this.clearEvents();var b=this.callbacksStack;this.cleanup();for(var c=0;c<b.length;c++){var d=b[c].complete,e=b[c].success,f=b[c].failure;d&&"function"==typeof d&&d(a),a&&f&&"function"==typeof f?f():e&&"function"==typeof e&&e()}},cancel:function(){this.isActive&&this.fireCallbacks(!0)},cleanup:function(){this.callbacksStack=[],this.isActive=!1,this.countStack=0},clearEvents:function(){this.activeEvent&&this.el.removeEventListener(g,this.activeEvent,!1),this.activeEvent=null},link:function(a,b){var c={complete:b.complete,success:b.success,failure:b.failure};return b.complete=this.addCallbackHook(c),b.success=null,b.failure=null,d(a,b),b.complete=c.complete,b.success=c.success,b.failure=c.failure,this}},b}();h.queue=function(){return{elements:[],push:function(a){this.elements.push(a)},pop:function(){return this.elements.pop()},run:function(){var a=this;if(0!=this.elements.length){if("function"==typeof this.elements[0]){var b=this.shift();b()}if(0!=this.elements.length){var c=this.shift();this.elements.length>0&&(c.complete=function(b){b||a.run()}),h(document.getElementById(c.id),c)}}},shift:function(){return this.elements.shift()}}}}),define("app/ui/jq.popup",[],function(){$.fn.popup=function(a){return new b(this[0],a)};var a=[],b=function(){var b=function(b,c){if(this.container="string"==typeof b||b instanceof String?document.getElementById(b):b,!this.container)return alert("Error finding container for popup "+b),void 0;try{("string"==typeof c||"number"==typeof c)&&(c={message:c,cancelOnly:"true",cancelText:"OK"}),this.id=id=c.id=c.id||$.uuid(),this.title=c.suppressTitle?"":c.title||"",this.message=c.message||"",this.cancelText=c.cancelText||"",this.cancelCallback=c.cancelCallback||function(){},this.cancelClass=c.cancelClass||"button",this.doneText=c.doneText||"",this.doneCallback=c.doneCallback||function(){},this.doneClass=c.doneClass||"button",this.cancelOnly=c.cancelOnly||!1,this.onShow=c.onShow||function(){},this.autoCloseDone=void 0!==c.autoCloseDone?c.autoCloseDone:!0,a.push(this),1==a.length&&this.show()}catch(d){console.log("error adding popup "+d)}};return b.prototype={id:null,title:null,message:null,cancelText:null,cancelCallback:null,cancelClass:null,doneText:null,doneCallback:null,doneClass:null,cancelOnly:!1,onShow:null,autoCloseDone:!0,supressTitle:!1,show:function(){var a=this,b='<div id="'+this.id+'" class="jqPopup hidden">        				<header>'+this.title+'</header>        				<div><div style="width:1px;height:1px;-webkit-transform:translate3d(0,0,0);float:right"></div>'+this.message+'</div>        				<footer style="clear:both;">        					<a href="javascript:;" class="'+this.cancelClass+'" id="cancel">'+this.cancelText+'</a>        					<a href="javascript:;" class="'+this.doneClass+'" id="action">'+this.doneText+"</a>        				</footer>        			</div></div>";$(this.container).append($(b));var c=$("#"+this.id);c.bind("close",function(){a.hide()}),this.cancelOnly&&(c.find("a#action").hide(),c.find("a#cancel").addClass("center")),c.find("a").each(function(){var b=$(this);b.bind("click",function(c){"cancel"==b.attr("id")?(a.cancelCallback.call(a.cancelCallback,a),a.hide()):(a.doneCallback.call(a.doneCallback,a),a.autoCloseDone&&a.hide()),c.preventDefault()})}),a.positionPopup(),$.blockUI(.5),c.removeClass("hidden"),c.bind("orientationchange",function(){a.positionPopup()}),c.find("header").show(),c.find("footer").show(),this.onShow(this)},hide:function(){var a=this;$("#"+a.id).addClass("hidden"),$.unblockUI(),setTimeout(function(){a.remove()},250)},remove:function(){var b=this,c=$("#"+b.id);c.unbind("close"),c.find("button#action").unbind("click"),c.find("button#cancel").unbind("click"),c.unbind("orientationchange").remove(),a.splice(0,1),a.length>0&&a[0].show()},positionPopup:function(){var a=$("#"+this.id);a.css("top",window.innerHeight/2.5+window.pageYOffset-a[0].clientHeight/2+"px"),a.css("left",window.innerWidth/2-a[0].clientWidth/2+"px")}},b}(),c=!1;$.blockUI=function(a){c||(a=a?" style='opacity:"+a+";'":"",$("body").prepend($("<div id='mask'"+a+"></div>")),$("body div#mask").bind("touchstart",function(a){a.preventDefault()}),$("body div#mask").bind("touchmove",function(a){a.preventDefault()}),c=!0)},$.unblockUI=function(){c=!1,$("body div#mask").unbind("touchstart"),$("body div#mask").unbind("touchmove"),$("body div#mask").remove()},window.alert=function(a){(null===a||void 0===a)&&(a="null"),$(document.body).popup({suppressTitle:!0,message:a.toString(),cancelOnly:"true",cancelText:"OK"})}}),define("app/ui/jq.selectBox",[],function(){$.selectBox={scroller:null,getOldSelects:function(a){if($.os.android&&!$.os.androidICS){if(!$.fn.scroller)return alert("This library requires jq.web.Scroller"),void 0;var b=a&&document.getElementById(a)?document.getElementById(a):document;if(!b)return alert("Could not find container element for jq.web.selectBox "+a),void 0;
for(var c=b.getElementsByTagName("select"),d=this,e=0;e<c.length;e++)c[e].hasSelectBoxFix||function(a){var b=document.createElement("div"),f=window.getComputedStyle(a),g="intrinsic"==f.width?"100%":f.width,h=parseInt(g)>0?g:"100px",i=parseInt(a.style.height)>0?a.style.height:parseInt(f.height)?f.height:"20px";b.style.width=h,b.style.height=i,b.style.margin=f.margin,b.style.position=f.position,b.style.left=f.left,b.style.top=f.top,b.style.lineHeight=f.lineHeight,b.style.zIndex="1",a.value&&(b.innerHTML=a.options[a.selectedIndex].text),b.style.background="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAeCAIAAABFWWJ4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkM1NjQxRUQxNUFEODExRTA5OUE3QjE3NjI3MzczNDAzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkM1NjQxRUQyNUFEODExRTA5OUE3QjE3NjI3MzczNDAzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzU2NDFFQ0Y1QUQ4MTFFMDk5QTdCMTc2MjczNzM0MDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzU2NDFFRDA1QUQ4MTFFMDk5QTdCMTc2MjczNzM0MDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6YWbdCAAAAlklEQVR42mIsKChgIBGwAHFPTw/xGkpKSlggrG/fvhGjgYuLC0gyMZAOoPb8//9/0Or59+8f8XrICQN66SEnDOgcp3AgKiqKqej169dY9Hz69AnCuHv3rrKyMrIKoAhcVlBQELt/gIqwstHD4B8quH37NlAQSKKJEwg3iLbBED8kpeshoGcwh5uuri5peoBFMEluAwgwAK+5aXfuRb4gAAAAAElFTkSuQmCC') right top no-repeat",b.style.backgroundColor="white",b.style.lineHeight=i,b.style.backgroundSize="contain",b.className="jqmobiSelect_fakeInput "+a.className,b.id=a.id+"_jqmobiSelect",b.style.border="1px solid gray",b.style.color="black",b.linkId=a.id,b.onclick=function(){d.initDropDown(this.linkId)},$(b).insertBefore($(a)),a.style.display="none",a.style.webkitAppearance="none";for(var j=0;j<a.options.length;j++)a.options[j].selected&&(b.value=a.options[j].text),a.options[j].watch("selected",function(b,c,e){return 1==e&&(a.getAttribute("multiple")||d.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),e});a.watch("selectedIndex",function(b,c,e){return this.options[e]&&(a.getAttribute("multiple")||d.updateMaskValue(this.id,this.options[e].text,this.options[e].value),this.value=this.options[e].value),e}),b=null,imageMask=null,c[e].hasSelectBoxFix=!0}(c[e]);d.createHtml()}},updateDropdown:function(a){var b=document.getElementById(a);if(b){for(var c=0;c<b.options.length;c++)b.options[c].selected&&(fakeInput.value=b.options[c].text),b.options[c].watch("selected",function(a,b,c){return 1==c&&(that.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),c});b=null}},initDropDown:function(a){var b=this,c=document.getElementById(a);if(!c.disabled&&c&&c.options&&0!=c.options.length){var d=a,e="",f=0;e=c.attributes.title||c.name,"object"==typeof e&&(e=e.value),document.getElementById("jqmobiSelectBoxScroll").innerHTML="",document.getElementById("jqmobiSelectBoxHeaderTitle").innerHTML=e.length>0?e:d;for(var g=0;g<c.options.length;g++){c.options[g].watch("selected",function(a,c,d){return 1==d&&(b.updateMaskValue(this.parentNode.id,this.text,this.value),this.parentNode.value=this.value),d});var h=c.options[g].selected?!0:!1,i=document.createElement("div"),j=document.createElement("a"),k=document.createElement("span"),l=document.createElement("button");i.className="jqmobiSelectRow",i.style.cssText="line-height:40px;font-size:14px;padding-left:10px;height:40px;width:100%;position:relative;width:100%;border-bottom:1px solid black;background:white;",i.tmpValue=g,i.onclick=function(){b.setDropDownValue(a,this.tmpValue,this)},j.style.cssText="text-decoration:none;color:black;",j.innerHTML=c.options[g].text,j.className="jqmobiSelectRowText",k.style.cssText="float:right;margin-right:20px;margin-top:-2px",h?(l.style.cssText="background: #000;padding: 0px 0px;border-radius:15px;border:3px solid black;",l.className="jqmobiSelectRowButtonFound"):(l.style.cssText="background: #ffffff;padding: 0px 0px;border-radius:15px;border:3px solid black;",l.className="jqmobiSelectRowButton"),l.style.width="20px",l.style.height="20px",l.checked=h,k.appendChild(l),i.appendChild(j),i.appendChild(k),document.getElementById("jqmobiSelectBoxScroll").appendChild(i),k=null,l=null,j=null}try{document.getElementById("jqmobiSelectModal").style.display="block"}catch(m){console.log("Error showing div "+m)}try{if(i){var n=numOnly(i.style.height),o=numOnly(document.getElementById("jqmobiSelectBoxHeader").style.height);if(f*n+o>=numOnly(document.getElementById("jqmobiSelectBoxFix").clientHeight)-o)var p=f*-n+o;else p=0;this.scroller.scrollTo({x:0,y:p})}}catch(m){console.log("error init dropdown"+m)}i=null,c=null}},updateMaskValue:function(a,b,c){var d=document.getElementById(a+"_jqmobiSelect"),e=document.getElementById(a);d&&(d.innerHTML=b),"function"==typeof e.onchange&&e.onchange(c),d=null,e=null},setDropDownValue:function(a,b,c){var d=document.getElementById(a);if(d){if(d.getAttribute("multiple")){var e=$(d).find("option:nth-child("+(b+1)+")").get(0);e.selected?(e.selected=!1,$(c).find("button").css("background","#fff")):(e.selected=!0,$(c).find("button").css("background","#000"))}else d.selectedIndex=b,$(d).find("option").forEach(function(a){a.selected=!1}),$(d).find("option:nth-child("+(b+1)+")").get(0).selected=!0,this.scroller.scrollTo({x:0,y:0}),this.hideDropDown();$(d).trigger("change"),d=null}},hideDropDown:function(){document.getElementById("jqmobiSelectModal").style.display="none",document.getElementById("jqmobiSelectBoxScroll").innerHTML=""},createHtml:function(){var a=this;if(!document.getElementById("jqmobiSelectBoxContainer")){var b=document.createElement("div");b.style.cssText="position:absolute;top:0px;bottom:0px;left:0px;right:0px;background:rgba(0,0,0,.7);z-index:200000;display:none;",b.id="jqmobiSelectModal";var c=document.createElement("div");c.id="jqmobiSelectBoxContainer",c.style.cssText="position:absolute;top:8%;bottom:10%;display:block;width:90%;margin:auto;margin-left:5%;height:90%px;background:white;color:black;border:1px solid black;border-radius:6px;",c.innerHTML='<div id="jqmobiSelectBoxHeader" style="display:block;font-family:\'Eurostile-Bold\', Eurostile, Helvetica, Arial, sans-serif;color:#fff;font-weight:bold;font-size:18px;line-height:34px;height:34px; text-transform:uppercase; text-align:left; text-shadow:rgba(0,0,0,.9) 0px -1px 1px; padding: 0px 8px 0px 8px; border-top-left-radius:5px; border-top-right-radius:5px; -webkit-border-top-left-radius:5px; -webkit-border-top-right-radius:5px; background:#39424b; margin:1px;"><div style="float:left;" id="jqmobiSelectBoxHeaderTitle"></div><div style="float:right;width:60px;margin-top:-5px"><div id="jqmobiSelectClose" class="button" style="width:60px;height:32px;line-height:32px;">Close</div></div></div><div id="jqmobiSelectBoxFix" style="position:relative;height:90%;background:white;overflow:hidden;width:100%;"><div id="jqmobiSelectBoxScroll"></div></div>';var a=this;b.appendChild(c),$(document).ready(function(){jq("#jQUi")?jq("#jQUi").append(b):document.body.appendChild(b);var d=$("#jqmobiSelectClose").get();d.onclick=function(){a.hideDropDown()};var e=$("<style>.jqselectscrollBarV{opacity:1 !important;}</style>").get();document.body.appendChild(e);try{a.scroller=$("#jqmobiSelectBoxScroll").scroller({scroller:!1,verticalScroll:!0,vScrollCSS:"jqselectscrollBarV"})}catch(f){console.log("Error creating select html "+f)}b=null,c=null,e=null})}}},HTMLElement.prototype.watch||(HTMLElement.prototype.watch=function(a,b){var c=this[a],d=c,e=function(){return d},f=function(e){return c=d,d=b.call(this,a,c,e)};delete this[a]&&(HTMLElement.defineProperty?HTMLElement.defineProperty(this,a,{get:e,set:f,enumerable:!1,configurable:!0}):HTMLElement.prototype.__defineGetter__&&HTMLElement.prototype.__defineSetter__&&(HTMLElement.prototype.__defineGetter__.call(this,a,e),HTMLElement.prototype.__defineSetter__.call(this,a,f)))}),HTMLElement.prototype.unwatch||(HTMLElement.prototype.unwatch=function(a){var b=this[a];delete this[a],this[a]=b})}),define("app/ui/loadUi",[],function(a){a("./zepto.extend"),a("./jq.popup"),a("./jq.selectBox"),a("./zepto.liffect")}),define("app/ui/noTransition",[],function(a,b,c){a("./jq.css3animate"),noTransition={finishCallback:null,css3animate:function(a,b){return a=$(a),a.css3Animate(b)},transition:function(a,b){b.style.display="block",a.style.display="block";var c=this;c.clearAnimations(b),c.css3animate(a,{x:"0%",y:0}),c.finishTransition(a),b.style.zIndex=2,a.style.zIndex=1},finishTransition:function(a,b){a.style.display="none",b&&this.clearAnimations(b),a&&this.clearAnimations(a),null!==this.finishCallback&&this.finishCallback()},clearAnimations:function(a){a.style[$.feat.cssPrefix+"Transform"]="none",a.style[$.feat.cssPrefix+"Transition"]="none"}},c.exports=noTransition}),define("app/ui/slideDownTransition",[],function(a,b,c){function d(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?(b.style.zIndex=1,a.style.zIndex=2,d.clearAnimations(b),d.css3animate(a,{y:"-100%",x:"0%",time:"150ms",complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.css3animate(a,{x:"-100%",y:0,complete:function(){d.finishTransition(a)}}),b.style.zIndex=2,a.style.zIndex=1,void 0)}})):(a.style.zIndex=1,b.style.zIndex=2,d.css3animate(b,{y:"-100%",x:"0%",complete:function(){d.css3animate(b,{y:"0%",x:"0%",time:"150ms",complete:function(c){return c?(d.finishTransition(a,b),void 0):(d.clearAnimations(b),d.css3animate(a,{x:"-100%",y:0,complete:function(){d.finishTransition(a)}}),void 0)}})}}))}c.exports=d}),define("app/ui/slideTransition",[],function(a,b,c){function d(a,b,c){a.style.display="block",b.style.display="block";var d=this;c?(b.style.zIndex=2,a.style.zIndex=1,d.css3animate(a,{x:"0%",y:"0%",complete:function(){d.css3animate(a,{x:"100%",time:"150ms",complete:function(){d.finishTransition(a,b)}}).link(b,{x:"0%",time:"150ms"})}}).link(b,{x:"-100%",y:"0%"})):(b.style.zIndex=2,a.style.zIndex=1,d.css3animate(a,{x:"0%",y:"0%",complete:function(){d.css3animate(a,{x:"-100%",time:"150ms",complete:function(){d.finishTransition(a,b)}}).link(b,{x:"0%",time:"150ms"})}}).link(b,{x:"100%",y:"0%"}))}c.exports=d}),define("app/ui/transitionManager",["./noTransition","./slideTransition","./slideDownTransition"],function(a,b,c){var d=a("./noTransition"),e=function(){this.availableTransitions={},this.availableTransitions["default"]=this.availableTransitions.none=d.transition};e.prototype.runTransition=function(b,c,e){var f,g,h,i,j,k=this;if(j=h=function(a){a()},null!==b?(f=b.el[0],"function"==typeof b.contentUnload&&(h=b.contentUnload)):f=document.createElement("div"),d.finishCallback=null,void 0===c)return console.log("!"),void 0;if(g=c.el[0],d.finishCallback=function(){f.style.display="none",c.trigger("contentLoad")},"function"==typeof c.contentLoadBefore&&(j=c.contentLoadBefore),i=c.transition,!this.availableTransitions[i])switch(i){case"slide":this.availableTransitions.slide=a("./slideTransition");break;case"down":this.availableTransitions.down=a("./slideDownTransition");break;default:i="default"}h.call(b,function(){j.call(c,function(){k.availableTransitions[i].call(d,f,g,e)},b)},c)},transitionManager=new e,c.exports=transitionManager}),define("app/ui/zepto.extend",[],function(){function a(a,b){a.os={},a.os.webkit=b.match(/WebKit\/([\d.]+)/)?!0:!1,a.os.android=b.match(/(Android)\s+([\d.]+)/)||b.match(/Silk-Accelerated/)?!0:!1,a.os.androidICS=a.os.android&&b.match(/(Android)\s4/)?!0:!1,a.os.ipad=b.match(/(iPad).*OS\s([\d_]+)/)?!0:!1,a.os.iphone=!a.os.ipad&&b.match(/(iPhone\sOS)\s([\d_]+)/)?!0:!1,a.os.webos=b.match(/(webOS|hpwOS)[\s\/]([\d.]+)/)?!0:!1,a.os.touchpad=a.os.webos&&b.match(/TouchPad/)?!0:!1,a.os.ios=a.os.ipad||a.os.iphone,a.os.playbook=b.match(/PlayBook/)?!0:!1,a.os.blackberry=a.os.playbook||b.match(/BlackBerry/)?!0:!1,a.os.blackberry10=a.os.blackberry&&b.match(/Safari\/536/)?!0:!1,a.os.chrome=b.match(/Chrome/)?!0:!1,a.os.opera=b.match(/Opera/)?!0:!1,a.os.fennec=b.match(/fennec/i)?!0:b.match(/Firefox/)?!0:!1,a.os.ie=b.match(/MSIE 10.0/i)?!0:!1,a.os.ieTouch=a.os.ie&&b.toLowerCase().match(/touch/i)?!0:!1,a.os.supportsTouch=window.DocumentTouch&&document instanceof window.DocumentTouch||"ontouchstart"in window,a.feat={};var c=document.documentElement.getElementsByTagName("head")[0];a.feat.nativeTouchScroll="undefined"!=typeof c.style["-webkit-overflow-scrolling"]&&a.os.ios,a.feat.cssPrefix=a.os.webkit?"Webkit":a.os.fennec?"Moz":a.os.ie?"ms":a.os.opera?"O":"",a.feat.cssTransformStart=a.os.opera?"(":"3d(",a.feat.cssTransformEnd=a.os.opera?")":",0)",a.os.android&&!a.os.webkit&&(a.os.android=!1)}a($,navigator.userAgent),$.__detectUA=a,$.uuid=function(){var a=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};var b=[],c=[],d=[];$.asap=function(a,e,f){if(!$.isFunction(a))throw"$.asap - argument is not a valid function";b.push(a),c.push(e?e:{}),d.push(f?f:[]),window.postMessage("jqm-asap","*")},window.addEventListener("message",function(a){a.source==window&&"jqm-asap"==a.data&&(a.stopPropagation(),b.length>0&&b.shift().apply(c.shift(),d.shift()))},!0),window.numOnly||(window.numOnly=function(a){if(void 0===a||""===a)return 0;if(isNaN(parseFloat(a))){if(!a.replace)return 0;a=a.replace(/[^0-9.-]/,"")}return parseFloat(a)})}),define("app/ui/zepto.liffect",[],function(){$.fn.listEffect=function(b,c){return b=b||{},"undefined"==typeof b.effect?!1:(this.attr("data-liffect",b.effect),new a(this,b,c))};var a=function(a,b,c){var d={};d.id=b.id||$.uuid(),d.container=a,d.childElName=b.childElName||"li",d.childs=d.container.find(d.childElName),d.size=b.size||d.childs.size()-1,d.time=b.time||"500",d.reverse=b.reverse||!1,d.out=b.out||!1,d.doneCallback=function(){d.container.removeClass("play"),d.out&&d.container.attr("data-liffect",""),"function"==typeof c&&c()},d.donetotalTime=(d.size+1)*d.time,d.reverse?this.reverseShow(d):this.show(d)};a.prototype={show:function(a){a.childs.each(function(b){$(this).attr("style","-webkit-animation-delay:"+b*a.time+"ms"),b==a.size&&a.container.addClass("play")}),setTimeout(function(){a.doneCallback()},a.donetotalTime)},reverseShow:function(a){a.childs.each(function(b){$(this).attr("style","-webkit-animation-delay:"+(a.size-b)*a.time+"ms"),b==a.size&&a.container.addClass("play")}),setTimeout(function(){a.doneCallback()},a.donetotalTime)}}}),define("app/utils/clientManager",["../mvc/route","../mvc/stack","../mvc/manager","../ui/transitionManager","../ui/noTransition","../ui/jq.css3animate","../ui/slideTransition","../ui/slideDownTransition","../pages/loginPage","../panels/loginPanel","../panels/serverPanel","../pages/gamePage","../panels/dungeonPanel","../panels/fightPanel","../panels/mainPanel","../panels/battlePanel","../config/consts","./mobile","../battle/battleModel","../battle/viewData","../battle/battleView","../mvc/createjs.extend","../battle/playerGroup","../battle/battleGroup","../battle/effect","../battle/enemyGroup","../battle/fighter","./utils","../battle/role","../battle/rune","../battle/skill","./dataApi","../battle/turnPointer","./utils.js"],function(a,b){function c(){var a=new f;return a}a("../mvc/route");var d=a("../mvc/stack"),e=a("../pages/loginPage"),f=d.sub({el:"#g-doc",controllers:{login:e},routes:{"/page/login":"login","/page/game":"game"},"default":"/page/login",init:function(){Spine.Route.setup({trigger:!0,history:!1,shim:!0,replace:!1}),this["default"]="/page/game",this.bind("defaultRoute",this.proxy(this.enterGame))},enterGame:function(){var b=a("../pages/gamePage");this.addChild("game",b),this.navigate("/page/game",!0)}});b.run=c}),define("app/utils/dataApi",[],function(a,b){function c(a){this.key=a,this.data=null}var d=window.APP.preload;c.prototype.set=function(a){this.data=a;var b=this;setTimeout(function(){localStorage.setItem(b.key,JSON.stringify(a))},300)},c.prototype.findById=function(a){var b=this.all();return b[a]},c.prototype.all=function(){return this.data||(this.data=JSON.parse(localStorage.getItem(this.key))||{}),this.data};var e=new c("character");e.set(d.getResult("characterData"));var f=new c("fightskill");f.set(d.getResult("fightskillData")),b.character=e,b.fightskill=f}),define("app/utils/mobile",["../config/consts"],function(a,b){function c(){var a=null;return a=null!==window.innerWidth?window.innerWidth:document.body.clientWidth}function d(){var a=null;return a=null!==window.innerHeight?window.innerHeight:document.body.clientHeight}function e(){var a=c();d(),g.width=g.height=a/f.WIDTH}var f=a("../config/consts").pageSize,g={};e(),b.canvasRadio=g}),define("app/utils/panelManager",["../mvc/stack","../mvc/manager","../ui/transitionManager","../ui/noTransition","../ui/jq.css3animate","../ui/slideTransition","../ui/slideDownTransition","../panels/dungeonPanel","../panels/fightPanel","../panels/mainPanel"],function(a,b,c){var d=a("../mvc/stack"),e=d.sub({el:"#gamePage",transition:"down",routes:{"/panel/main":"main","/panel/dungeon":"dungeon","/panel/fight":"fight"},init:function(){var b=this;$("#navbar").delegate("a","click",function(){var c=$(this).attr("href").substr(1);switch(c){case"/panel/dungeon":var d=a("../panels/dungeonPanel");b.addChild("dungeon",d);break;case"/panel/fight":var e=a("../panels/fightPanel");b.addChild("fight",e)}b.navigate(c)}),this.on("contentLoad",this.proxy(this.contentLoad))},contentLoad:function(){var b=a("../panels/mainPanel");this.addChild("main",b),this.navigate("/panel/main",!0)}}),f=new e;c.exports=f}),define("app/utils/utils",[],function(a,b){function c(a,b,c){1==arguments.length&&(c=a,a=void 0);var d=document.createElement("canvas");return void 0===c?document.body.appendChild(d):c.appendChild(d),void 0!==a&&(d.width=a),void 0!==b&&(d.height=b),d}function d(a,b){var c=document.createElement("canvas");return void 0!==a&&(c.width=a),void 0!==b&&(c.height=b),c}function e(a,b){var c=new Image;return c.src=g.config.ASSET_URL+a,c.loaded=!1,c.onload=function(){c.loaded=!0,b&&b(c)},c}function f(){return document.createElement("audio")}var g=window.APP;b.createSketchpad=c,b.loadImage=e,b.createAudio=f,b.createHiddenSketchpad=d});